(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{3462:function(e,t,s){Promise.resolve().then(s.bind(s,9536))},9536:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(5964),r=s(4141),i=s(800),c=s(3678),d=s(8440),a=s(3808);function l(e,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK"===t?"MMK":"USD",maximumFractionDigits:"MMK"===t?0:2}).format(e/("USD"===t?100:1))}function u(e){var t,s,u;let{params:{locale:o}}=e,{ready:m,accessToken:f}=(0,d._)(),[x,h]=(0,i.useState)(!0),[v,p]=(0,i.useState)(!1),[b,j]=(0,i.useState)(null),[y,N]=(0,i.useState)({items:[]});async function g(e){var t;let s=await (0,c.dv)(e);N({items:null!==(t=s.items)&&void 0!==t?t:[],id:s.id,vendorId:s.vendorId,currency:s.currency})}(0,i.useEffect)(()=>{if(!m)return;if(!f){j("Please login to view cart."),h(!1);return}let e=!0;return h(!0),g(f).then(()=>{e&&j(null)}).catch(()=>{e&&j("Failed to load cart.")}).finally(()=>{e&&h(!1)}),()=>{e=!1}},[m,f]);let w=null!==(u=null!==(s=y.currency)&&void 0!==s?s:null===(t=y.items[0])||void 0===t?void 0:t.variant.currency)&&void 0!==u?u:"USD",S=(0,i.useMemo)(()=>y.items.reduce((e,t)=>e+t.unitPrice*t.qty,0),[y.items]);async function k(e,t){if(f&&!(t<1)){p(!0);try{var s;let n=await (0,c.bd)(e,{qty:t},f);N({items:null!==(s=n.items)&&void 0!==s?s:[],id:n.id,vendorId:n.vendorId,currency:n.currency}),j(null),(0,a.t)()}catch(e){j("Failed to update item quantity.")}finally{p(!1)}}}async function E(e){if(f){p(!0);try{await (0,c.B8)(e,f),await g(f),j(null),(0,a.t)()}catch(e){j("Failed to remove item.")}finally{p(!1)}}}return(0,n.jsxs)("section",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"surface p-5 md:p-6",children:(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-[#181f46]",children:"Your Cart"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-[#5d6486]",children:"Single-vendor checkout only. Keep items from one vendor per cart."})]}),(0,n.jsx)(r.default,{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",href:"/".concat(o,"/products"),children:"Continue shopping"})]})}),b?(0,n.jsx)("div",{className:"surface border-[#ffd7dd] bg-[#fff5f6] p-4 text-sm text-[#b12f43]",children:b}):null,(0,n.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[1fr_320px]",children:[(0,n.jsx)("div",{className:"surface p-4",children:x?(0,n.jsx)("p",{className:"text-sm text-[#5d6486]",children:"Loading cart..."}):0===y.items.length?(0,n.jsx)("p",{className:"text-sm text-[#5d6486]",children:"Your cart is empty."}):(0,n.jsx)("div",{className:"space-y-3",children:y.items.map(e=>{var t,s;return(0,n.jsx)("article",{className:"rounded-xl border border-[#d8e1ff] bg-[#fbfcff] p-3",children:(0,n.jsxs)("div",{className:"grid gap-2 sm:grid-cols-[1fr_auto] sm:items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-[#1d2551]",children:null!==(s=null===(t=e.variant.product)||void 0===t?void 0:t.title)&&void 0!==s?s:"Product"}),(0,n.jsxs)("p",{className:"text-xs text-[#6270a6]",children:["Variant ID: ",e.variant.id]}),(0,n.jsxs)("p",{className:"text-xs text-[#6270a6]",children:["Unit: ",l(e.unitPrice,e.variant.currency)]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{className:"w-20 rounded-lg border border-[#cfd9ff] bg-white px-2 py-1.5 text-sm",type:"number",min:1,value:e.qty,onChange:t=>k(e.id,Number(t.target.value)),disabled:v}),(0,n.jsx)("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-3 py-1.5 text-xs font-semibold text-[#c33f53]",onClick:()=>E(e.id),type:"button",disabled:v,children:"Remove"})]})]})},e.id)})})}),(0,n.jsxs)("aside",{className:"surface h-fit p-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-[#181f46]",children:"Summary"}),(0,n.jsxs)("dl",{className:"mt-3 space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-[#5d6486]",children:[(0,n.jsx)("dt",{children:"Items"}),(0,n.jsx)("dd",{children:y.items.length})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-[#5d6486]",children:[(0,n.jsx)("dt",{children:"Subtotal"}),(0,n.jsx)("dd",{className:"font-medium text-[#1e2756]",children:l(S,w)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-[#5d6486]",children:[(0,n.jsx)("dt",{children:"Shipping"}),(0,n.jsx)("dd",{children:"Calculated at checkout"})]})]}),(0,n.jsx)(r.default,{className:"btn-primary mt-5 block rounded-xl px-4 py-2 text-center text-sm font-semibold",href:"/".concat(o,"/checkout"),children:"Proceed to checkout"})]})]})]})}},8440:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var n=s(800),r=s(6290),i=s(3178),c=s(2207);function d(){let e=(0,c.usePathname)(),[t,s]=(0,n.useState)(!1),[d,a]=(0,n.useState)(void 0),[l,u]=(0,n.useState)(null),o=()=>{var e;a(null!==(e=(0,r.zf)(i.Qs))&&void 0!==e?e:void 0),u((0,r.ZK)())};return(0,n.useEffect)(()=>{o(),s(!0)},[e]),(0,n.useEffect)(()=>{let e=()=>{o(),s(!0)};return window.addEventListener(i.UY,e),()=>{window.removeEventListener(i.UY,e)}},[]),{ready:t,accessToken:d,role:l}}},3808:function(e,t,s){"use strict";s.d(t,{V:function(){return n},t:function(){return r}});let n="eco:header-counts-refresh";function r(){window.dispatchEvent(new Event(n))}}},function(e){e.O(0,[46,320,716,550,744],function(){return e(e.s=3462)}),_N_E=e.O()}]);