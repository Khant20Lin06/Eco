(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[735],{6753:function(e,t,s){Promise.resolve().then(s.bind(s,6586))},6586:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(5964),l=s(4141),a=s(2207),i=s(800),r=s(6519),d=s(3678),c=s(8440),o=s(3808);function u(e){var t,s;let{params:{locale:u}}=e,m=(0,a.useRouter)(),{ready:f,accessToken:x}=(0,c._)(),[v,p]=(0,i.useState)(!0),[h,b]=(0,i.useState)(!1),[g,y]=(0,i.useState)(null),[j,N]=(0,i.useState)(null),[w,S]=(0,i.useState)([]),[C,M]=(0,i.useState)(null);async function k(e){S((await (0,d.FS)(e)).items)}async function _(e){if(x){b(!0),y(null),N(null);try{await (0,d.Q9)(e,x),await k(x),(0,o.t)(),N("Removed from wishlist.")}catch(e){y("Failed to remove wishlist item.")}finally{b(!1)}}}async function E(e){if(x&&C){b(!0),y(null),N(null);try{await (0,d._7)(e,x),(0,o.t)(),M(null),N('Added "'.concat(C.title,'" to cart.'))}catch(e){e instanceof Error&&e.message.includes("409")?(N("Single-vendor cart only. Clear cart first."),m.push("/".concat(u,"/cart"))):y("Failed to add item to cart.")}finally{b(!1)}}}return(0,i.useEffect)(()=>{if(!f)return;if(!x){y("Please login to see wishlist."),p(!1);return}let e=!0;return p(!0),k(x).then(()=>{e&&y(null)}).catch(()=>{e&&y("Failed to load wishlist.")}).finally(()=>{e&&p(!1)}),()=>{e=!1}},[f,x]),(0,n.jsxs)("section",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"surface p-5 md:p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-[#181f46]",children:"Saved / Wishlist"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-[#5d6486]",children:"Your saved products. Manage and move to cart anytime."})]}),g?(0,n.jsx)("div",{className:"surface border-[#ffd7dd] bg-[#fff5f6] p-4 text-sm text-[#b12f43]",children:g}):null,j?(0,n.jsx)("div",{className:"surface border-[#d1eeda] bg-[#f1fbf4] p-4 text-sm text-[#17724b]",children:j}):null,v?(0,n.jsx)("div",{className:"surface p-4 text-sm text-[#5d6486]",children:"Loading wishlist..."}):0===w.length?(0,n.jsxs)("div",{className:"surface p-4 text-sm text-[#5d6486]",children:["No saved items yet."," ",(0,n.jsx)(l.default,{className:"font-semibold text-[#3550be] hover:underline",href:"/".concat(u,"/products"),children:"Browse products"})]}):(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:w.map(e=>{var t,s,a,i,r;let d=e.product,c=null===(t=d.images[0])||void 0===t?void 0:t.url,o=d.variants[0];return(0,n.jsxs)("article",{className:"surface overflow-hidden",children:[(0,n.jsx)("div",{className:"h-44 bg-gradient-to-br from-[#ffe7ed] to-[#e7ecff]",children:c?(0,n.jsx)("img",{alt:d.title,className:"h-full w-full object-cover",src:c}):(0,n.jsx)("div",{className:"grid h-full place-items-center text-xs text-[#6b749c]",children:"No image"})}),(0,n.jsxs)("div",{className:"space-y-3 p-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"line-clamp-1 text-base font-semibold text-[#1b2148]",children:d.title}),(0,n.jsx)("p",{className:"mt-1 line-clamp-2 text-sm text-[#5d6486]",children:d.description})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("p",{className:"font-semibold text-[#19235f]",children:o?(i=o.price,r=o.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK"===r?"MMK":"USD",maximumFractionDigits:"MMK"===r?0:2}).format(i/("USD"===r?100:1))):"-"}),(0,n.jsx)("span",{className:"text-xs text-[#5d6486]",children:null!==(a=null===(s=d.category)||void 0===s?void 0:s.name)&&void 0!==a?a:"Category"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)(l.default,{className:"rounded-lg border border-[#c9d6ff] px-3 py-2 text-center text-sm font-medium text-[#3d4d95]",href:"/".concat(u,"/product/").concat(d.id),children:"Detail"}),(0,n.jsx)("button",{className:"btn-primary rounded-lg px-3 py-2 text-sm font-semibold disabled:opacity-60",onClick:()=>(function(e){if(!x){N("Please login first."),m.push("/".concat(u,"/login"));return}if(0===e.product.variants.length){N("No purchasable variant.");return}N(null),M(e.product)})(e),type:"button",disabled:h,children:"Add Cart"})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-2",children:(0,n.jsx)("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-3 py-2 text-sm font-semibold text-[#c33f53] disabled:opacity-60",onClick:()=>_(d.id),type:"button",disabled:h,children:"Remove"})})]})]},e.id)})}),(0,n.jsx)(r.Z,{locale:u,onClose:()=>M(null),onConfirm:E,open:!!C,title:null!==(t=null==C?void 0:C.title)&&void 0!==t?t:"",variants:null!==(s=null==C?void 0:C.variants)&&void 0!==s?s:[]})]})}},6519:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(5964),l=s(800);function a(e){var t,s,a,i;let{open:r,title:d,variants:c,locale:o,onClose:u,onConfirm:m}=e,[f,x]=(0,l.useState)({}),[v,p]=(0,l.useState)(1),[h,b]=(0,l.useState)(!1),g=(0,l.useMemo)(()=>(function(e){let t=new Map;for(let l of e){var s,n;for(let e of null!==(s=l.options)&&void 0!==s?s:[])t.has(e.name)||t.set(e.name,new Set),null===(n=t.get(e.name))||void 0===n||n.add(e.value)}return Array.from(t.entries()).map(e=>{let[t,s]=e;return{name:t,values:Array.from(s)}})})(c),[c]),y=(0,l.useMemo)(()=>{var e;return null!==(e=c.find(e=>0===g.length||g.every(t=>{var s;let n=f[t.name];if(!n)return!1;let l=(null!==(s=e.options)&&void 0!==s?s:[]).find(e=>e.name===t.name);return(null==l?void 0:l.value)===n})))&&void 0!==e?e:0===g.length?c[0]:void 0},[g,f,c]);if((0,l.useEffect)(()=>{if(!r)return;let e={},t=c[0];for(let a of g){var s,n,l;let i=null!==(l=null==t?void 0:null===(n=t.options)||void 0===n?void 0:null===(s=n.find(e=>e.name===a.name))||void 0===s?void 0:s.value)&&void 0!==l?l:a.values[0];i&&(e[a.name]=i)}x(e),p(1)},[r,g,c]),!r)return null;let j=null!==(t=null==y?void 0:y.stockQty)&&void 0!==t?t:0;return(0,n.jsx)("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/45 px-4",onClick:u,children:(0,n.jsxs)("div",{className:"w-full max-w-lg rounded-2xl border border-[#dce3ff] bg-white p-5 shadow-[0_24px_60px_rgba(0,0,0,0.25)]",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-[#1b2452]",children:"Choose Variant"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-[#5d6486] line-clamp-1",children:d})]}),(0,n.jsx)("button",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-[#d4dcff] text-[#4e5b8c]",onClick:u,type:"button",children:"\xd7"})]}),(0,n.jsxs)("div",{className:"mt-4 space-y-3",children:[g.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-[#2d396d]",children:e.name}),(0,n.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.values.map(t=>(0,n.jsx)("button",{className:"rounded-full border px-3 py-1.5 text-xs font-semibold ".concat(f[e.name]===t?"border-[#3958c7] bg-[#3958c7] text-white":"border-[#d4ddff] bg-white text-[#2e3a6c]"),onClick:()=>x(s=>({...s,[e.name]:t})),type:"button",children:t},"".concat(e.name,"-").concat(t)))})]},e.name)),(0,n.jsxs)("div",{className:"grid gap-3 sm:grid-cols-[1fr_auto]",children:[(0,n.jsxs)("label",{className:"text-sm font-semibold text-[#2d396d]",children:["Quantity",(0,n.jsx)("input",{className:"mt-2 w-full rounded-xl border border-[#cad3ff] px-3 py-2 text-sm",min:1,max:j>0?j:void 0,onChange:e=>p(Number(e.target.value)),type:"number",value:v})]}),(0,n.jsxs)("div",{className:"rounded-xl border border-[#d7e0ff] bg-[#f8faff] px-4 py-3",children:[(0,n.jsx)("p",{className:"text-xs text-[#60709e]",children:"Price"}),(0,n.jsx)("p",{className:"text-base font-semibold text-[#18214f]",children:y?(a=y.price,i=y.currency,new Intl.NumberFormat("my"===o?"my-MM":"en-US",{style:"currency",currency:"MMK"===i?"MMK":"USD",maximumFractionDigits:"MMK"===i?0:2}).format(a/("USD"===i?100:1))):"-"}),(0,n.jsxs)("p",{className:"mt-1 text-xs text-[#60709e]",children:["Stock ",null!==(s=null==y?void 0:y.stockQty)&&void 0!==s?s:0]})]})]})]}),(0,n.jsxs)("div",{className:"mt-5 flex justify-end gap-2",children:[(0,n.jsx)("button",{className:"rounded-lg border border-[#cad6ff] px-4 py-2 text-sm font-semibold text-[#3349ad]",onClick:u,type:"button",children:"Cancel"}),(0,n.jsx)("button",{className:"rounded-lg bg-[#3654c5] px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",disabled:!y||j<=0||v<1||v>j||h,onClick:async()=>{if(y&&!(v<1)){b(!0);try{await m({variantId:y.id,qty:v})}finally{b(!1)}}},type:"button",children:h?"Adding...":"Add to bag"})]})]})})}},8440:function(e,t,s){"use strict";s.d(t,{_:function(){return r}});var n=s(800),l=s(6290),a=s(3178),i=s(2207);function r(){let e=(0,i.usePathname)(),[t,s]=(0,n.useState)(!1),[r,d]=(0,n.useState)(void 0),[c,o]=(0,n.useState)(null),u=()=>{var e;d(null!==(e=(0,l.zf)(a.Qs))&&void 0!==e?e:void 0),o((0,l.ZK)())};return(0,n.useEffect)(()=>{u(),s(!0)},[e]),(0,n.useEffect)(()=>{let e=()=>{u(),s(!0)};return window.addEventListener(a.UY,e),()=>{window.removeEventListener(a.UY,e)}},[]),{ready:t,accessToken:r,role:c}}},3808:function(e,t,s){"use strict";s.d(t,{V:function(){return n},t:function(){return l}});let n="eco:header-counts-refresh";function l(){window.dispatchEvent(new Event(n))}}},function(e){e.O(0,[46,320,716,550,744],function(){return e(e.s=6753)}),_N_E=e.O()}]);