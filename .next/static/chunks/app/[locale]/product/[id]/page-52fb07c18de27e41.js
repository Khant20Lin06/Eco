(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{526:function(e,t,s){Promise.resolve().then(s.bind(s,3134))},3134:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(5964),n=s(4141),r=s(2207),l=s(800),i=s(3678),d=s(8440),c=s(3808);function o(e){var t,s,o,u,f,m,x,v;let{params:{locale:h,id:p}}=e,b=(0,r.useRouter)(),{accessToken:g}=(0,d._)(),[N,j]=(0,l.useState)(!0),[w,y]=(0,l.useState)(null),[S,k]=(0,l.useState)(null),[E,_]=(0,l.useState)(null),[C,M]=(0,l.useState)(""),[P,F]=(0,l.useState)(1),[Q,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=!0;return j(!0),(0,i.wv)(p,{locale:h}).then(t=>{var s,a;e&&(_(t),M(null!==(a=null===(s=t.variants[0])||void 0===s?void 0:s.id)&&void 0!==a?a:""),y(null))}).catch(()=>{e&&y("Product not found or unavailable.")}).finally(()=>{e&&j(!1)}),()=>{e=!1}},[p,h]),(0,l.useEffect)(()=>{if(!g||!E){U(!1);return}let e=!0;return(0,i.FS)(g).then(t=>{e&&U(t.items.some(e=>e.productId===E.id))}).catch(()=>{e&&U(!1)}),()=>{e=!1}},[g,E]);let I=(0,l.useMemo)(()=>{var e;return null!==(e=null==E?void 0:E.variants.find(e=>e.id===C))&&void 0!==e?e:null==E?void 0:E.variants[0]},[E,C]);async function K(){if(!I){k("No purchasable variant.");return}if(!g){k("Please login before adding to cart."),b.push("/".concat(h,"/login"));return}if(P<1){k("Quantity must be at least 1.");return}try{await (0,i._7)({variantId:I.id,qty:P},g),(0,c.t)(),k("Added to cart."),y(null),b.push("/".concat(h,"/cart"))}catch(e){e instanceof Error&&e.message.includes("409")?(k("Single-vendor cart only. Remove current cart items first."),b.push("/".concat(h,"/cart"))):k("Failed to add to cart.")}}async function L(){if(E){if(!g){k("Please login first."),b.push("/".concat(h,"/login"));return}try{Q?(await (0,i.Q9)(E.id,g),U(!1),(0,c.t)(),k("Removed from wishlist.")):(await (0,i.Ln)(E.id,g),U(!0),(0,c.t)(),k("Saved to wishlist."))}catch(e){k("Failed to update wishlist.")}}}return N?(0,a.jsx)("section",{className:"surface p-6 text-sm text-[#58608a]",children:"Loading product..."}):!E||w?(0,a.jsxs)("section",{className:"surface p-6",children:[(0,a.jsx)("p",{className:"text-sm text-[#b12f43]",children:null!=w?w:"Product unavailable."}),(0,a.jsx)(n.default,{className:"mt-4 inline-flex text-sm font-semibold text-[#3550c0] underline",href:"/".concat(h,"/products"),children:"Back to products"})]}):(0,a.jsx)("section",{className:"space-y-4",children:(0,a.jsx)("div",{className:"surface overflow-hidden p-5 md:p-6",children:(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_1.1fr]",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"overflow-hidden rounded-2xl border border-[#d8e1ff] bg-[#f2f6ff]",children:(null===(t=E.images[0])||void 0===t?void 0:t.url)?(0,a.jsx)("img",{alt:E.title,className:"h-[320px] w-full object-cover",src:E.images[0].url}):(0,a.jsx)("div",{className:"grid h-[320px] place-items-center text-sm text-[#69729b]",children:"No image"})}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:E.images.slice(0,4).map(e=>{var t;return(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-[#d9e2ff] bg-white",children:(0,a.jsx)("img",{alt:null!==(t=e.altText)&&void 0!==t?t:E.title,className:"h-20 w-full object-cover",src:e.url})},e.id)})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-[#6270a6]",children:null!==(o=null===(s=E.category)||void 0===s?void 0:s.name)&&void 0!==o?o:"Catalog"}),(0,a.jsx)("h1",{className:"mt-1 text-3xl font-semibold text-[#171e44]",children:E.title}),(0,a.jsx)("p",{className:"mt-2 text-sm leading-6 text-[#596389]",children:E.description})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:(null!==(u=E.tags)&&void 0!==u?u:[]).map(e=>{var t,s;return(0,a.jsx)("span",{className:"chip bg-[#eef3ff] text-[#44539a]",children:null!==(s=null===(t=e.tag)||void 0===t?void 0:t.name)&&void 0!==s?s:e.tagId},e.id)})}),(0,a.jsxs)("div",{className:"rounded-2xl border border-[#d7e0ff] bg-[#f8faff] p-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#334177]",children:["Variant",(0,a.jsx)("select",{className:"mt-2 w-full rounded-xl border border-[#cfd9ff] bg-white px-3 py-2 text-sm text-[#1d2551]",value:null!==(f=null==I?void 0:I.id)&&void 0!==f?f:"",onChange:e=>M(e.target.value),children:E.variants.map(e=>(0,a.jsx)("option",{value:e.id,children:e.options&&0!==e.options.length?"".concat(e.options.map(e=>"".concat(e.name,": ").concat(e.value)).join(" / ")," (").concat(e.sku,")"):e.sku},e.id))})]}),(0,a.jsxs)("div",{className:"mt-3 grid gap-3 sm:grid-cols-[1fr_auto]",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#334177]",children:["Quantity",(0,a.jsx)("input",{className:"mt-2 w-full rounded-xl border border-[#cfd9ff] bg-white px-3 py-2 text-sm text-[#1d2551]",type:"number",min:1,value:P,onChange:e=>F(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-[#d3dcff] bg-white px-4 py-3 text-right",children:[(0,a.jsx)("p",{className:"text-xs text-[#60709e]",children:"Price"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-[#17204d]",children:I?(x=I.price,v=I.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK"===v?"MMK":"USD",maximumFractionDigits:"MMK"===v?0:2}).format(x/("USD"===v?100:1))):"-"}),(0,a.jsxs)("p",{className:"text-xs text-[#60709e]",children:["Stock ",null!==(m=null==I?void 0:I.stockQty)&&void 0!==m?m:0]})]})]})]}),S?(0,a.jsx)("p",{className:"text-sm text-[#2a4ea0]",children:S}):null,(0,a.jsxs)("div",{className:"grid gap-2 sm:grid-cols-3",children:[(0,a.jsx)("button",{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold",onClick:K,type:"button",children:"Add to cart"}),(0,a.jsx)("button",{className:Q?"rounded-xl border border-[#f3b4c0] bg-[#fff0f3] px-4 py-2 text-sm font-semibold text-[#b73249]":"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",onClick:L,type:"button",children:Q?"Saved":"Save"}),(0,a.jsx)(n.default,{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-center text-sm font-semibold text-[#3349ad]",href:"/".concat(h,"/cart"),children:"Go to cart"})]})]})]})})})}},8440:function(e,t,s){"use strict";s.d(t,{_:function(){return i}});var a=s(800),n=s(6290),r=s(3178),l=s(2207);function i(){let e=(0,l.usePathname)(),[t,s]=(0,a.useState)(!1),[i,d]=(0,a.useState)(void 0),[c,o]=(0,a.useState)(null),u=()=>{var e;d(null!==(e=(0,n.zf)(r.Qs))&&void 0!==e?e:void 0),o((0,n.ZK)())};return(0,a.useEffect)(()=>{u(),s(!0)},[e]),(0,a.useEffect)(()=>{let e=()=>{u(),s(!0)};return window.addEventListener(r.UY,e),()=>{window.removeEventListener(r.UY,e)}},[]),{ready:t,accessToken:i,role:c}}},3808:function(e,t,s){"use strict";s.d(t,{V:function(){return a},t:function(){return n}});let a="eco:header-counts-refresh";function n(){window.dispatchEvent(new Event(a))}}},function(e){e.O(0,[46,320,716,550,744],function(){return e(e.s=526)}),_N_E=e.O()}]);