(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{437:function(e,t,s){Promise.resolve().then(s.bind(s,8050))},2207:function(e,t,s){"use strict";s.r(t);var a=s(5373),r={};for(var n in a)"default"!==n&&(r[n]=(function(e){return a[e]}).bind(0,n));s.d(t,r)},8050:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5964),r=s(800),n=s(3678),i=s(1066),c=s(8440);let l={country:"US",flatRate:"0",currency:"USD",active:!0};function d(){let{ready:e,accessToken:t}=(0,c._)(),[s,d]=(0,r.useState)(!0),[o,u]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),[h,b]=(0,r.useState)([]),[y,g]=(0,r.useState)(l),[v,j]=(0,r.useState)("");async function N(e){b((await (0,n.Gc)({},e)).items)}async function S(e){if(e.preventDefault(),t){u(!0),p(null),m(null);try{v?(await (0,n.mk)(v,{country:y.country.trim().toUpperCase(),flatRate:Number(y.flatRate),currency:y.currency.trim().toUpperCase(),active:y.active},t),m("Shipping rate updated.")):(await (0,n.WD)({country:y.country.trim().toUpperCase(),flatRate:Number(y.flatRate),currency:y.currency.trim().toUpperCase(),active:y.active},t),m("Shipping rate created.")),await N(t),j(""),g(l)}catch(e){p((0,i.i)(e,"Failed to save shipping rate."))}finally{u(!1)}}}async function C(e){if(t){u(!0),p(null);try{await (0,n.G4)(e,t),await N(t),m("Shipping rate disabled.")}catch(e){p((0,i.i)(e,"Failed to disable shipping rate."))}finally{u(!1)}}}return(0,r.useEffect)(()=>{if(!e)return;if(!t){p("Please login as vendor."),d(!1);return}let s=!0;return d(!0),N(t).then(()=>{s&&p(null)}).catch(e=>{s&&p((0,i.i)(e,"Failed to load shipping rates."))}).finally(()=>{s&&d(!1)}),()=>{s=!1}},[e,t]),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"surface p-5",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#181f46]",children:"Shipping Rates"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-[#5d6486]",children:"Configure flat rates by country for checkout shipping."})]}),(0,a.jsx)("button",{className:"rounded-xl border border-[#c7d4ff] bg-white px-3 py-2 text-sm font-semibold text-[#3349ad]",onClick:()=>t&&N(t),type:"button",children:"Refresh"})]})}),f?(0,a.jsx)("div",{className:"surface border-[#ffd7dd] bg-[#fff5f6] p-4 text-sm text-[#b12f43]",children:f}):null,x?(0,a.jsx)("div",{className:"surface border-[#d1eeda] bg-[#f1fbf4] p-4 text-sm text-[#17724b]",children:x}):null,(0,a.jsxs)("section",{className:"surface p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#1b234f]",children:v?"Update Shipping Rate":"Create Shipping Rate"}),(0,a.jsxs)("form",{className:"mt-3 grid gap-2 md:grid-cols-4",onSubmit:S,children:[(0,a.jsx)("input",{className:"rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",placeholder:"Country (US/MM)",value:y.country,onChange:e=>g(t=>({...t,country:e.target.value})),required:!0}),(0,a.jsx)("input",{className:"rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",placeholder:"Flat rate",type:"number",min:0,value:y.flatRate,onChange:e=>g(t=>({...t,flatRate:e.target.value})),required:!0}),(0,a.jsxs)("select",{className:"rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:y.currency,onChange:e=>g(t=>({...t,currency:e.target.value})),required:!0,children:[(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"MMK",children:"MMK"})]}),(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm text-[#3a4476]",children:[(0,a.jsx)("input",{checked:y.active,onChange:e=>g(t=>({...t,active:e.target.checked})),type:"checkbox"}),"Active"]}),(0,a.jsxs)("div",{className:"md:col-span-4 flex gap-2",children:[(0,a.jsx)("button",{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold disabled:opacity-60",type:"submit",disabled:o,children:o?"Saving...":v?"Update rate":"Create rate"}),v?(0,a.jsx)("button",{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",type:"button",onClick:()=>{j(""),g(l)},children:"Cancel edit"}):null]})]})]}),(0,a.jsxs)("section",{className:"surface p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#1b234f]",children:"Configured Rates"}),s?(0,a.jsx)("p",{className:"mt-3 text-sm text-[#5d6486]",children:"Loading rates..."}):0===h.length?(0,a.jsx)("p",{className:"mt-3 text-sm text-[#5d6486]",children:"No shipping rates configured yet."}):(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[760px] border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-[#e0e7ff] text-left text-xs uppercase tracking-wide text-[#6a739c]",children:[(0,a.jsx)("th",{className:"px-2 py-2",children:"Country"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Flat Rate"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Currency"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Status"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:h.map(e=>(0,a.jsxs)("tr",{className:"border-b border-[#f0f3ff] text-sm text-[#374472]",children:[(0,a.jsx)("td",{className:"px-2 py-3",children:e.country}),(0,a.jsx)("td",{className:"px-2 py-3",children:e.flatRate}),(0,a.jsx)("td",{className:"px-2 py-3",children:e.currency}),(0,a.jsx)("td",{className:"px-2 py-3",children:(0,a.jsx)("span",{className:e.active?"chip chip-success":"chip chip-danger",children:e.active?"ACTIVE":"DISABLED"})}),(0,a.jsx)("td",{className:"px-2 py-3",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"rounded-lg border border-[#bcd1ff] bg-white px-2 py-1 text-xs font-semibold text-[#3550c0]",type:"button",onClick:()=>{j(e.id),g({country:e.country,flatRate:String(e.flatRate),currency:e.currency,active:e.active})},children:"Edit"}),(0,a.jsx)("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-2 py-1 text-xs font-semibold text-[#c33f53] disabled:opacity-50",type:"button",onClick:()=>C(e.id),disabled:o||!e.active,children:"Disable"})]})})]},e.id))})]})})]})]})}},1066:function(e,t,s){"use strict";function a(e,t){return e instanceof Error?e.message.includes("401")?"Session expired. Please login again.":e.message.includes("403")?"You do not have permission for this vendor action.":e.message.includes("404")?"Vendor profile not found. Please complete onboarding first.":e.message.includes("409")?"Conflict detected. Refresh and try again.":e.message:t}s.d(t,{i:function(){return a}})},8440:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var a=s(800),r=s(6290),n=s(3178),i=s(2207);function c(){let e=(0,i.usePathname)(),[t,s]=(0,a.useState)(!1),[c,l]=(0,a.useState)(void 0),[d,o]=(0,a.useState)(null),u=()=>{var e;l(null!==(e=(0,r.zf)(n.Qs))&&void 0!==e?e:void 0),o((0,r.ZK)())};return(0,a.useEffect)(()=>{u(),s(!0)},[e]),(0,a.useEffect)(()=>{let e=()=>{u(),s(!0)};return window.addEventListener(n.UY,e),()=>{window.removeEventListener(n.UY,e)}},[]),{ready:t,accessToken:c,role:d}}}},function(e){e.O(0,[320,716,550,744],function(){return e(e.s=437)}),_N_E=e.O()}]);