(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{9045:function(e,t,s){Promise.resolve().then(s.bind(s,6247))},6247:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var r=s(5964),n=s(4141),a=s(800),d=s(3678),i=s(1066),o=s(8440);let c={name:"",country:"US",currency:"USD",commissionPct:"10"};function l(e){let{params:{locale:t}}=e,{ready:s,accessToken:l}=(0,o._)(),[u,m]=(0,a.useState)(!0),[f,x]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[h,g]=(0,a.useState)(null),[v,N]=(0,a.useState)(!1),[j,y]=(0,a.useState)({products:0,orders:0,returns:0}),[w,S]=(0,a.useState)(c);async function E(e){let[t,s,r]=await Promise.all([(0,d.gC)(e),(0,d.D4)({limit:50},e),(0,d.n7)({limit:50},e)]);y({products:t.items.length,orders:s.items.length,returns:r.items.length})}async function P(e){if(e.preventDefault(),l){x(!0),b(null),g(null);try{let e=await (0,d.dh)({name:w.name.trim(),country:w.country.toUpperCase(),currency:w.currency,commissionPct:Number(w.commissionPct)},l);N(!1),g("Vendor application submitted with status ".concat(e.status,".")),await E(l)}catch(e){b((0,i.i)(e,"Failed to submit vendor application. Ensure email is verified."))}finally{x(!1)}}}return((0,a.useEffect)(()=>{if(!s)return;if(!l){b("Please login as vendor."),m(!1);return}let e=!0;return m(!0),E(l).then(()=>{e&&(N(!1),b(null))}).catch(t=>{e&&(t instanceof Error&&t.message.includes("404")?(N(!0),b(null)):t instanceof Error&&t.message.includes("403")?(N(!0),b("Verify email before vendor onboarding.")):b((0,i.i)(t,"Failed to load vendor workspace.")))}).finally(()=>{e&&m(!1)}),()=>{e=!1}},[s,l]),u)?(0,r.jsx)("section",{className:"surface p-5 text-sm text-[#5d6486]",children:"Loading vendor workspace..."}):v?(0,r.jsxs)("section",{className:"surface p-5 md:p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-[#181f46]",children:"Vendor onboarding"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-[#5d6486]",children:"Create your vendor profile first. Email verification is required."}),p?(0,r.jsx)("p",{className:"mt-3 rounded-lg border border-[#ffd7dd] bg-[#fff5f6] px-3 py-2 text-sm text-[#b12f43]",children:p}):null,(0,r.jsxs)("form",{className:"mt-4 grid gap-3 md:grid-cols-2",onSubmit:P,children:[(0,r.jsx)("input",{className:"rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm md:col-span-2",placeholder:"Store name",value:w.name,onChange:e=>S(t=>({...t,name:e.target.value})),required:!0}),(0,r.jsx)("input",{className:"rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",placeholder:"Country (US/MM)",value:w.country,onChange:e=>S(t=>({...t,country:e.target.value})),required:!0}),(0,r.jsxs)("select",{className:"rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:w.currency,onChange:e=>S(t=>({...t,currency:e.target.value})),children:[(0,r.jsx)("option",{value:"USD",children:"USD"}),(0,r.jsx)("option",{value:"MMK",children:"MMK"})]}),(0,r.jsx)("input",{className:"rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",type:"number",min:0,max:100,value:w.commissionPct,onChange:e=>S(t=>({...t,commissionPct:e.target.value})),required:!0}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)("button",{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold disabled:opacity-60",type:"submit",disabled:f,children:f?"Submitting...":"Submit vendor application"})})]})]}):(0,r.jsxs)("section",{className:"space-y-4",children:[h?(0,r.jsx)("div",{className:"surface border-[#d1eeda] bg-[#f1fbf4] p-4 text-sm text-[#17724b]",children:h}):null,(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("article",{className:"surface border border-[#dbe4ff] bg-gradient-to-br from-white to-[#f5f8ff] p-4",children:[(0,r.jsx)("p",{className:"text-sm text-[#5d6486]",children:"Products"}),(0,r.jsx)("p",{className:"mt-2 text-2xl font-semibold text-[#17204d]",children:j.products}),(0,r.jsx)("p",{className:"mt-1 text-xs text-[#6a739c]",children:"Published + draft catalog items"})]}),(0,r.jsxs)("article",{className:"surface border border-[#dbe4ff] bg-gradient-to-br from-white to-[#f5f8ff] p-4",children:[(0,r.jsx)("p",{className:"text-sm text-[#5d6486]",children:"Orders"}),(0,r.jsx)("p",{className:"mt-2 text-2xl font-semibold text-[#17204d]",children:j.orders}),(0,r.jsx)("p",{className:"mt-1 text-xs text-[#6a739c]",children:"Orders waiting for processing"})]}),(0,r.jsxs)("article",{className:"surface border border-[#dbe4ff] bg-gradient-to-br from-white to-[#f5f8ff] p-4",children:[(0,r.jsx)("p",{className:"text-sm text-[#5d6486]",children:"Returns"}),(0,r.jsx)("p",{className:"mt-2 text-2xl font-semibold text-[#17204d]",children:j.returns}),(0,r.jsx)("p",{className:"mt-1 text-xs text-[#6a739c]",children:"Return requests from customers"})]})]}),(0,r.jsxs)("div",{className:"surface p-5",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-[#181f46]",children:"Quick actions"}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,r.jsx)(n.default,{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold",href:"/".concat(t,"/vendor/products"),children:"Manage products"}),(0,r.jsx)(n.default,{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",href:"/".concat(t,"/vendor/orders"),children:"Manage orders"}),(0,r.jsx)(n.default,{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",href:"/".concat(t,"/vendor/shipping"),children:"Manage shipping"}),(0,r.jsx)(n.default,{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",href:"/".concat(t,"/vendor/returns"),children:"Manage returns"})]})]})]})}},1066:function(e,t,s){"use strict";function r(e,t){return e instanceof Error?e.message.includes("401")?"Session expired. Please login again.":e.message.includes("403")?"You do not have permission for this vendor action.":e.message.includes("404")?"Vendor profile not found. Please complete onboarding first.":e.message.includes("409")?"Conflict detected. Refresh and try again.":e.message:t}s.d(t,{i:function(){return r}})},8440:function(e,t,s){"use strict";s.d(t,{_:function(){return i}});var r=s(800),n=s(6290),a=s(3178),d=s(2207);function i(){let e=(0,d.usePathname)(),[t,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(void 0),[c,l]=(0,r.useState)(null),u=()=>{var e;o(null!==(e=(0,n.zf)(a.Qs))&&void 0!==e?e:void 0),l((0,n.ZK)())};return(0,r.useEffect)(()=>{u(),s(!0)},[e]),(0,r.useEffect)(()=>{let e=()=>{u(),s(!0)};return window.addEventListener(a.UY,e),()=>{window.removeEventListener(a.UY,e)}},[]),{ready:t,accessToken:i,role:c}}}},function(e){e.O(0,[46,320,716,550,744],function(){return e(e.s=9045)}),_N_E=e.O()}]);