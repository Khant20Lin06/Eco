(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{9418:function(e,t,s){Promise.resolve().then(s.bind(s,5632))},2207:function(e,t,s){"use strict";s.r(t);var a=s(5373),l={};for(var r in a)"default"!==r&&(l[r]=(function(e){return a[e]}).bind(0,r));s.d(t,l)},5632:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(5964),l=s(800),r=s(3499),n=s(3678),i=s(1066),d=s(8440);let o={title:"",description:"",categoryId:"",status:"ACTIVE",tagIds:[]},c={sku:"",options:[{key:u(),name:"Size",value:""}],price:"0",currency:"USD",stockQty:"0",weightG:""};function u(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,9))}function x(){var e,t;let{ready:s,accessToken:x}=(0,d._)(),[m,f]=(0,l.useState)(!0),[p,b]=(0,l.useState)(!1),[h,g]=(0,l.useState)(null),[y,v]=(0,l.useState)(null),[j,N]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[C,S]=(0,l.useState)([]),[I,E]=(0,l.useState)(""),[A,D]=(0,l.useState)(!1),[P,T]=(0,l.useState)(null),[V,U]=(0,l.useState)(o),[M,F]=(0,l.useState)(!1),[O,R]=(0,l.useState)(null),[q,Q]=(0,l.useState)(null),[L,K]=(0,l.useState)(c),[_,z]=(0,l.useState)(!1),[G,Z]=(0,l.useState)(null),[H,B]=(0,l.useState)([]),Y=(0,l.useMemo)(()=>new Map(w.map(e=>[e.id,e])),[w]),W=(0,l.useMemo)(()=>{let e=I.trim().toLowerCase();return e?j.filter(t=>{var s,a;return t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||(null!==(a=null===(s=Y.get(t.categoryId))||void 0===s?void 0:s.name)&&void 0!==a?a:"").toLowerCase().includes(e)}):j},[Y,j,I]),X=(0,l.useMemo)(()=>{var e;return O&&null!==(e=j.find(e=>e.id===O))&&void 0!==e?e:null},[j,O]),J=(0,l.useMemo)(()=>{var e;return G&&null!==(e=j.find(e=>e.id===G))&&void 0!==e?e:null},[j,G]);async function $(e){let[t,s,a]=await Promise.all([(0,n.gC)(e),(0,n.kb)(),(0,n.rw)()]);N(t.items),k(s.items),S(a.items)}function ee(e){var t,s;U({...o,categoryId:null!==(s=null!=e?e:null===(t=w[0])||void 0===t?void 0:t.id)&&void 0!==s?s:""})}function et(){D(!1),T(null),ee()}function es(){F(!1),R(null),Q(null),K(c)}function ea(){z(!1),Z(null),B([])}function el(e,t,s){K(a=>({...a,options:a.options.map(a=>a.key===e?{...a,[t]:s}:a)}))}async function er(e){if(e.preventDefault(),x){if(!V.categoryId){g("Category is required.");return}b(!0),g(null),v(null);try{P?(await (0,n.yr)(P,{title:V.title.trim(),description:V.description.trim(),categoryId:V.categoryId,status:V.status,tagIds:V.tagIds},x),v("Product updated.")):(await (0,n.Mq)({title:V.title.trim(),description:V.description.trim(),categoryId:V.categoryId,tagIds:V.tagIds},x),v("Product created.")),await $(x),et()}catch(e){g((0,i.i)(e,"Failed to save product."))}finally{b(!1)}}}async function en(e){if(x){b(!0),g(null),v(null);try{let t=await (0,n.Cv)(e,x);await $(x),"DELETED"===t.mode?v("Product deleted."):v("Product has orders, so it was archived instead.")}catch(e){g((0,i.i)(e,"Failed to delete product."))}finally{b(!1)}}}async function ei(e,t,s){if(x){b(!0),g(null),v(null);try{let s=await (0,n.K)(e,t,x);await $(x),"DISABLED"===s.mode?v("Variant is linked to orders, so stock was set to reserved quantity (disabled for new sales)."):v("Variant deleted.")}catch(a){if(a instanceof Error&&a.message.includes("409"))try{await (0,n.lg)(e,t,{stockQty:s},x),await $(x),v("Variant is linked to orders. It was disabled by setting stock to reserved quantity.")}catch(e){g((0,i.i)(e,"This variant is already used by orders, so it cannot be deleted."))}else g((0,i.i)(a,"Failed to delete variant."))}finally{b(!1)}}}async function ed(e,t){if(x){b(!0),g(null),v(null);try{await (0,n.yr)(e,{status:t},x),await $(x),v("Product marked ".concat(t,"."))}catch(e){g((0,i.i)(e,"Failed to mark product ".concat(t,".")))}finally{b(!1)}}}async function eo(e){if(e.preventDefault(),!x||!O)return;let t=Number(L.price),s=Number(L.stockQty),a=L.weightG.trim()?Number(L.weightG):void 0;if(!L.sku.trim()){g("SKU is required.");return}if(!Number.isInteger(t)||t<0){g("Price must be a non-negative integer (smallest unit).");return}if(!Number.isInteger(s)||s<0){g("Stock must be a non-negative integer.");return}if(null!=a&&(!Number.isInteger(a)||a<0)){g("Weight must be a non-negative integer.");return}let l=L.options.map(e=>({name:e.name.trim(),value:e.value.trim()})).filter(e=>e.name&&e.value);if(0===l.length){g("At least one variant option is required (e.g. Size, Color).");return}b(!0),g(null),v(null);try{q?(await (0,n.lg)(O,q,{sku:L.sku.trim(),options:l,price:t,stockQty:s,weightG:a},x),v("Variant updated.")):(await (0,n.Hv)(O,{sku:L.sku.trim(),options:l,price:t,currency:L.currency,stockQty:s,weightG:a},x),v("Variant created.")),await $(x),es()}catch(e){g((0,i.i)(e,"Failed to save variant."))}finally{b(!1)}}function ec(e,t,s){B(a=>a.map(a=>{if(a.key!==e)return a;if("sortOrder"===t){let e=Number(s);return{...a,sortOrder:Number.isInteger(e)&&e>=0?e:a.sortOrder}}return{...a,altText:s}}))}async function eu(e){if(e.preventDefault(),x&&G){if(0===H.length){g("Select at least one image file.");return}b(!0),g(null),v(null);try{let e=[],a=!1;for(let l of H){let r=l.file.type||"image/jpeg";try{var t,s;let a=await (0,n.xp)({filename:l.file.name,contentType:r,size:l.file.size},x);if(!(await fetch(a.url,{method:"PUT",headers:{"Content-Type":r},body:l.file})).ok)throw Error("Upload failed for ".concat(l.file.name));e.push({url:null!==(s=null!==(t=a.publicUrl)&&void 0!==t?t:a.url.split("?")[0])&&void 0!==s?s:a.url,altText:l.altText.trim()||void 0,sortOrder:l.sortOrder})}catch(s){if(l.file.size>204800)throw Error("S3 upload unavailable and fallback supports files up to 200KB only (".concat(l.file.name,")."));let t=await function(e){return new Promise((t,s)=>{let a=new FileReader;a.onload=()=>{if("string"==typeof a.result){t(a.result);return}s(Error("Failed to read file"))},a.onerror=()=>s(Error("Failed to read file")),a.readAsDataURL(e)})}(l.file);e.push({url:t,altText:l.altText.trim()||void 0,sortOrder:l.sortOrder}),a=!0}}await (0,n.FX)(G,{images:e},x),await $(x),ea(),a?v("Images attached with local fallback. Configure S3/MinIO to use object storage upload."):v("Images uploaded and attached to product.")}catch(e){g((0,i.i)(e,"Image upload failed."))}finally{b(!1)}}}return(0,l.useEffect)(()=>{if(!s)return;if(!x){g("Please login as vendor."),f(!1);return}let e=!0;return f(!0),$(x).then(()=>{e&&g(null)}).catch(t=>{e&&g((0,i.i)(t,"Failed to load vendor catalog."))}).finally(()=>{e&&f(!1)}),()=>{e=!1}},[s,x]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"surface p-5",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#181f46]",children:"Vendor Products"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-[#5d6486]",children:"Full product CRUD, variant management and image attachment from backend APIs."})]}),(0,a.jsx)("button",{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold",onClick:function(){T(null),ee(),D(!0),g(null)},type:"button",children:"Create Product"})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,a.jsx)("input",{className:"min-w-[260px] flex-1 rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",placeholder:"Search title, category or description",value:I,onChange:e=>E(e.target.value)}),(0,a.jsx)("button",{className:"rounded-xl border border-[#c7d4ff] bg-white px-3 py-2 text-sm font-semibold text-[#3349ad]",onClick:()=>x&&$(x),type:"button",children:"Refresh"})]})]}),h?(0,a.jsx)("div",{className:"surface border-[#ffd7dd] bg-[#fff5f6] p-4 text-sm text-[#b12f43]",children:h}):null,y?(0,a.jsx)("div",{className:"surface border-[#d1eeda] bg-[#f1fbf4] p-4 text-sm text-[#17724b]",children:y}):null,m?(0,a.jsx)("div",{className:"surface p-4 text-sm text-[#5d6486]",children:"Loading products..."}):0===W.length?(0,a.jsx)("div",{className:"surface p-4 text-sm text-[#5d6486]",children:"No products found."}):(0,a.jsx)("div",{className:"space-y-4",children:W.map(e=>{var t,s,l,r,n,i;let d=e.images[0],o=null!==(s=null===(t=Y.get(e.categoryId))||void 0===t?void 0:t.name)&&void 0!==s?s:e.categoryId;return(0,a.jsxs)("article",{className:"surface overflow-hidden",children:[(0,a.jsx)("div",{className:"border-b border-[#e2e8ff] bg-[#f8faff] px-4 py-3",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(null==d?void 0:d.url)?(0,a.jsx)("img",{src:d.url,alt:null!==(l=d.altText)&&void 0!==l?l:e.title,className:"h-14 w-14 rounded-xl border border-[#d6defb] object-cover"}):(0,a.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl border border-dashed border-[#d6defb] bg-white text-xs text-[#7a84b3]",children:"No image"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-[#6874a3]",children:o}),(0,a.jsx)("h3",{className:"mt-0.5 text-lg font-semibold text-[#18204d]",children:e.title}),(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[(0,a.jsx)("span",{className:"ACTIVE"===(i=e.status)?"chip chip-success":"DRAFT"===i?"chip chip-warn":"chip chip-danger",children:e.status}),(0,a.jsxs)("span",{className:"text-xs text-[#6d76a2]",children:["Variants: ",e.variants.length," • Images: ",e.images.length]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{className:"rounded-lg border border-[#bcd1ff] bg-white px-3 py-1.5 text-xs font-semibold text-[#3550c0]",onClick:()=>{var t;T(e.id),U({title:e.title,description:e.description,categoryId:e.categoryId,status:e.status,tagIds:(null!==(t=e.tags)&&void 0!==t?t:[]).map(e=>e.tagId)}),D(!0),g(null)},type:"button",children:"Edit"}),(0,a.jsx)("button",{className:"rounded-lg border border-[#bcd1ff] bg-white px-3 py-1.5 text-xs font-semibold text-[#3550c0]",onClick:()=>(function(e){var t,s;let a=null!==(s=null===(t=e.variants[0])||void 0===t?void 0:t.currency)&&void 0!==s?s:"USD";R(e.id),Q(null),K({...c,currency:a}),F(!0),g(null)})(e),type:"button",children:"Add Variant"}),(0,a.jsx)("button",{className:"rounded-lg border border-[#bcd1ff] bg-white px-3 py-1.5 text-xs font-semibold text-[#3550c0]",onClick:()=>{B([]),Z(e.id),z(!0),g(null),v('Attach images for "'.concat(e.title,'".'))},type:"button",children:"Attach Image"}),"ARCHIVED"!==e.status?(0,a.jsx)("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-3 py-1.5 text-xs font-semibold text-[#c33f53] disabled:opacity-60",onClick:()=>en(e.id),type:"button",disabled:p,children:"Delete"}):(0,a.jsx)("button",{className:"rounded-lg border border-[#bcd1ff] bg-white px-3 py-1.5 text-xs font-semibold text-[#3550c0] disabled:opacity-60",onClick:()=>ed(e.id,"ACTIVE"),type:"button",disabled:p,children:"Restore ACTIVE"})]})]})}),(0,a.jsxs)("div",{className:"space-y-4 p-4",children:[(0,a.jsx)("p",{className:"text-sm text-[#2d396d]",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:0===(null!==(r=e.tags)&&void 0!==r?r:[]).length?(0,a.jsx)("span",{className:"text-xs text-[#6f78a4]",children:"No tags"}):(null!==(n=e.tags)&&void 0!==n?n:[]).map(e=>{var t,s;return(0,a.jsx)("span",{className:"rounded-full bg-[#eef3ff] px-2 py-1 text-xs text-[#3352ba]",children:null!==(s=null===(t=e.tag)||void 0===t?void 0:t.name)&&void 0!==s?s:e.tagId},e.id)})}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-[#1f2858]",children:"Variants"}),(0,a.jsxs)("span",{className:"text-xs text-[#6c76a5]",children:[e.variants.length," items"]})]}),0===e.variants.length?(0,a.jsx)("div",{className:"rounded-xl border border-dashed border-[#d9e1ff] bg-[#fbfcff] px-3 py-3 text-xs text-[#7181b7]",children:"No variants yet. Add variant to enable cart selection."}):(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl border border-[#d9e1ff]",children:(0,a.jsxs)("table",{className:"w-full min-w-[760px] border-collapse",children:[(0,a.jsx)("thead",{className:"bg-[#f8faff]",children:(0,a.jsxs)("tr",{className:"text-left text-xs uppercase tracking-wide text-[#6a739c]",children:[(0,a.jsx)("th",{className:"px-2 py-2",children:"SKU"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Options"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Price"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Stock"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Reserved"}),(0,a.jsx)("th",{className:"px-2 py-2",children:"Action"})]})}),(0,a.jsx)("tbody",{children:e.variants.map(t=>{var s,l,r;return(0,a.jsxs)("tr",{className:"border-t border-[#edf1ff] text-sm text-[#334172]",children:[(0,a.jsx)("td",{className:"px-2 py-2",children:t.sku}),(0,a.jsx)("td",{className:"px-2 py-2",children:(null!==(s=t.options)&&void 0!==s?s:[]).map(e=>"".concat(e.name,": ").concat(e.value)).join(" • ")||"-"}),(0,a.jsx)("td",{className:"px-2 py-2",children:(l=t.price,r=t.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK"===r?"MMK":"USD",maximumFractionDigits:"MMK"===r?0:2}).format(l/("USD"===r?100:1)))}),(0,a.jsx)("td",{className:"px-2 py-2",children:t.stockQty}),(0,a.jsx)("td",{className:"px-2 py-2",children:t.reservedQty}),(0,a.jsx)("td",{className:"px-2 py-2",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"rounded-lg border border-[#bcd1ff] bg-white px-2 py-1 text-xs font-semibold text-[#3550c0]",onClick:()=>(function(e,t){var s,a;let l=(null!==(s=t.options)&&void 0!==s?s:[]).map(e=>({key:u(),name:e.name,value:e.value}));R(e.id),Q(t.id),K({sku:t.sku,options:l.length>0?l:[{key:u(),name:"Size",value:""}],price:String(t.price),currency:null!==(a=t.currency)&&void 0!==a?a:"USD",stockQty:String(t.stockQty),weightG:null==t.weightG?"":String(t.weightG)}),F(!0),g(null)})(e,t),type:"button",children:"Edit"}),(0,a.jsx)("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-2 py-1 text-xs font-semibold text-[#c33f53] disabled:opacity-60",onClick:()=>ei(e.id,t.id,t.reservedQty),type:"button",disabled:p,children:"Delete"})]})})]},t.id)})})]})})]}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-[#1f2858]",children:"Attached Images"}),(0,a.jsxs)("span",{className:"text-xs text-[#6c76a5]",children:[e.images.length," files"]})]}),0===e.images.length?(0,a.jsx)("div",{className:"rounded-xl border border-dashed border-[#d9e1ff] bg-[#fbfcff] px-3 py-3 text-xs text-[#7181b7]",children:"No images attached."}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.images.map(t=>{var s;return(0,a.jsxs)("figure",{className:"w-[108px] overflow-hidden rounded-xl border border-[#d7dffd] bg-white",children:[(0,a.jsx)("img",{src:t.url,alt:null!==(s=t.altText)&&void 0!==s?s:e.title,className:"h-20 w-full object-cover"}),(0,a.jsxs)("figcaption",{className:"px-2 py-1 text-[11px] text-[#65709f]",children:["#",t.sortOrder]})]},t.id)})})]})]})]},e.id)})})]}),(0,a.jsx)(r.Z,{open:A,title:P?"Update Product":"Create Product",onClose:et,children:(0,a.jsxs)("form",{className:"space-y-3",onSubmit:er,children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Title",(0,a.jsx)("input",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:V.title,onChange:e=>U(t=>({...t,title:e.target.value})),minLength:2,maxLength:120,required:!0})]}),(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Description",(0,a.jsx)("textarea",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:V.description,onChange:e=>U(t=>({...t,description:e.target.value})),minLength:10,rows:5,required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Category",(0,a.jsxs)("select",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:V.categoryId,onChange:e=>U(t=>({...t,categoryId:e.target.value})),required:!0,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select category"}),w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Status",(0,a.jsxs)("select",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:V.status,onChange:e=>U(t=>({...t,status:e.target.value})),disabled:!P,children:[(0,a.jsx)("option",{value:"ACTIVE",children:"ACTIVE"}),(0,a.jsx)("option",{value:"DRAFT",children:"DRAFT"}),(0,a.jsx)("option",{value:"ARCHIVED",children:"ARCHIVED"})]}),P?null:(0,a.jsx)("p",{className:"mt-1 text-xs text-[#6f78a7]",children:"New product defaults to ACTIVE by backend logic."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[#2b376b]",children:"Sustainability Tags"}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:C.map(e=>{let t=V.tagIds.includes(e.id);return(0,a.jsx)("button",{className:"rounded-full border px-3 py-1 text-xs font-semibold ".concat(t?"border-[#3550be] bg-[#3550be] text-white":"border-[#cad6ff] bg-white text-[#334278]"),onClick:()=>{var t;return t=e.id,void U(e=>{let s=e.tagIds.includes(t);return{...e,tagIds:s?e.tagIds.filter(e=>e!==t):[...e.tagIds,t]}})},type:"button",children:e.name},e.id)})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded-xl border border-[#cad6ff] px-4 py-2 text-sm font-semibold text-[#3349ad]",type:"button",onClick:et,children:"Cancel"}),(0,a.jsx)("button",{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold disabled:opacity-60",type:"submit",disabled:p,children:p?"Saving...":P?"Update Product":"Create Product"})]})]})}),(0,a.jsx)(r.Z,{open:M,title:q?"Update Variant":"Create Variant",onClose:es,children:(0,a.jsxs)("form",{className:"space-y-3",onSubmit:eo,children:[(0,a.jsxs)("p",{className:"text-xs text-[#6f78a7]",children:["Product: ",(0,a.jsx)("span",{className:"font-semibold text-[#2a3564]",children:null!==(e=null==X?void 0:X.title)&&void 0!==e?e:"-"})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["SKU",(0,a.jsx)("input",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:L.sku,onChange:e=>K(t=>({...t,sku:e.target.value})),required:!0})]}),(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Currency",(0,a.jsxs)("select",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",value:L.currency,onChange:e=>K(t=>({...t,currency:e.target.value})),children:[(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"MMK",children:"MMK"})]})]}),(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Price (smallest unit)",(0,a.jsx)("input",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",type:"number",min:0,value:L.price,onChange:e=>K(t=>({...t,price:e.target.value})),required:!0})]}),(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Stock Qty",(0,a.jsx)("input",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",type:"number",min:0,value:L.stockQty,onChange:e=>K(t=>({...t,stockQty:e.target.value})),required:!0})]}),(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b] md:col-span-2",children:["Weight (grams, optional)",(0,a.jsx)("input",{className:"mt-1 w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",type:"number",min:0,value:L.weightG,onChange:e=>K(t=>({...t,weightG:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-[#dbe2ff] bg-[#f9fbff] p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[#2b376b]",children:"Variant Options"}),(0,a.jsx)("button",{className:"rounded-lg border border-[#bcd1ff] bg-white px-2 py-1 text-xs font-semibold text-[#3550c0]",onClick:function(){K(e=>({...e,options:[...e.options,{key:u(),name:"",value:""}]}))},type:"button",children:"Add Option"})]}),(0,a.jsx)("div",{className:"mt-2 space-y-2",children:L.options.map(e=>(0,a.jsxs)("div",{className:"grid gap-2 md:grid-cols-[1fr_1fr_auto]",children:[(0,a.jsx)("input",{className:"rounded-lg border border-[#cfd9ff] px-3 py-2 text-sm",placeholder:"Option name (e.g. Size)",value:e.name,onChange:t=>el(e.key,"name",t.target.value),required:!0}),(0,a.jsx)("input",{className:"rounded-lg border border-[#cfd9ff] px-3 py-2 text-sm",placeholder:"Value (e.g. M)",value:e.value,onChange:t=>el(e.key,"value",t.target.value),required:!0}),(0,a.jsx)("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-3 py-2 text-xs font-semibold text-[#c33f53]",onClick:()=>{var t;return t=e.key,void K(e=>e.options.length<=1?e:{...e,options:e.options.filter(e=>e.key!==t)})},type:"button",children:"Remove"})]},e.key))})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded-xl border border-[#cad6ff] px-4 py-2 text-sm font-semibold text-[#3349ad]",type:"button",onClick:es,children:"Cancel"}),(0,a.jsx)("button",{className:"btn-secondary rounded-xl px-4 py-2 text-sm font-semibold disabled:opacity-60",type:"submit",disabled:p,children:p?"Saving...":q?"Update Variant":"Create Variant"})]})]})}),(0,a.jsx)(r.Z,{open:_,title:"Attach Product Images",onClose:ea,children:(0,a.jsxs)("form",{className:"space-y-3",onSubmit:eu,children:[(0,a.jsxs)("p",{className:"text-xs text-[#6f78a7]",children:["Product: ",(0,a.jsx)("span",{className:"font-semibold text-[#2a3564]",children:null!==(t=null==J?void 0:J.title)&&void 0!==t?t:"-"})]}),(0,a.jsxs)("label",{className:"block text-sm font-semibold text-[#2b376b]",children:["Select files",(0,a.jsx)("input",{className:"mt-1 block w-full rounded-xl border border-[#cfd9ff] px-3 py-2 text-sm",type:"file",accept:"image/png,image/jpeg,image/webp",multiple:!0,onChange:function(e){let t=e.target.files;if(!t||!J)return;let s=J.images.length+H.length,a=Array.from(t).map((e,t)=>({key:u(),file:e,altText:"",sortOrder:s+t}));B(e=>[...e,...a]),e.target.value=""}})]}),0===H.length?(0,a.jsx)("p",{className:"text-xs text-[#6f78a7]",children:"No files selected."}):(0,a.jsx)("div",{className:"space-y-2",children:H.map(e=>(0,a.jsxs)("div",{className:"rounded-xl border border-[#d9e1ff] p-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[#223065]",children:e.file.name}),(0,a.jsxs)("p",{className:"text-xs text-[#6f78a7]",children:[(e.file.size/1024).toFixed(1)," KB • ",e.file.type||"unknown"]})]}),(0,a.jsx)("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-2 py-1 text-xs font-semibold text-[#c33f53]",onClick:()=>{var t;return t=e.key,void B(e=>e.filter(e=>e.key!==t))},type:"button",children:"Remove"})]}),(0,a.jsxs)("div",{className:"mt-2 grid gap-2 md:grid-cols-[1fr_140px]",children:[(0,a.jsx)("input",{className:"rounded-lg border border-[#cfd9ff] px-3 py-2 text-sm",placeholder:"Alt text (optional)",value:e.altText,onChange:t=>ec(e.key,"altText",t.target.value)}),(0,a.jsx)("input",{className:"rounded-lg border border-[#cfd9ff] px-3 py-2 text-sm",type:"number",min:0,value:e.sortOrder,onChange:t=>ec(e.key,"sortOrder",t.target.value)})]})]},e.key))}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded-xl border border-[#cad6ff] px-4 py-2 text-sm font-semibold text-[#3349ad]",type:"button",onClick:ea,children:"Cancel"}),(0,a.jsx)("button",{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold disabled:opacity-60",type:"submit",disabled:p||0===H.length,children:p?"Uploading...":"Upload & Attach"})]})]})})]})}},3499:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(5964);function l(e){let{open:t,title:s,onClose:l,children:r}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-slate-900/40 p-4 pt-16",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl rounded-2xl border border-slate-200 bg-white shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:s}),(0,a.jsx)("button",{className:"rounded-md border border-slate-300 px-3 py-1 text-sm text-slate-700 hover:bg-slate-100",onClick:l,type:"button",children:"Close"})]}),(0,a.jsx)("div",{className:"max-h-[75vh] overflow-y-auto p-5",children:r})]})}):null}},1066:function(e,t,s){"use strict";function a(e,t){return e instanceof Error?e.message.includes("401")?"Session expired. Please login again.":e.message.includes("403")?"You do not have permission for this vendor action.":e.message.includes("404")?"Vendor profile not found. Please complete onboarding first.":e.message.includes("409")?"Conflict detected. Refresh and try again.":e.message:t}s.d(t,{i:function(){return a}})},8440:function(e,t,s){"use strict";s.d(t,{_:function(){return i}});var a=s(800),l=s(6290),r=s(3178),n=s(2207);function i(){let e=(0,n.usePathname)(),[t,s]=(0,a.useState)(!1),[i,d]=(0,a.useState)(void 0),[o,c]=(0,a.useState)(null),u=()=>{var e;d(null!==(e=(0,l.zf)(r.Qs))&&void 0!==e?e:void 0),c((0,l.ZK)())};return(0,a.useEffect)(()=>{u(),s(!0)},[e]),(0,a.useEffect)(()=>{let e=()=>{u(),s(!0)};return window.addEventListener(r.UY,e),()=>{window.removeEventListener(r.UY,e)}},[]),{ready:t,accessToken:i,role:o}}}},function(e){e.O(0,[320,716,550,744],function(){return e(e.s=9418)}),_N_E=e.O()}]);