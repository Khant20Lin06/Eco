(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{9899:function(e,t,s){Promise.resolve().then(s.bind(s,5552))},2207:function(e,t,s){"use strict";s.r(t);var a=s(5373),l={};for(var n in a)"default"!==n&&(l[n]=(function(e){return a[e]}).bind(0,n));s.d(t,l)},5552:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(5964),l=s(800),n=s(3499),r=s(3781),d=s(3678);let i={en_name:"",mm_name:"",slug:"",description:"",active:!0};function c(){let{ready:e,accessToken:t}=(0,r.m)(),[s,c]=(0,l.useState)(!0),[m,o]=(0,l.useState)(!1),[x,u]=(0,l.useState)(null),[p,h]=(0,l.useState)(""),[g,b]=(0,l.useState)([]),[j,v]=(0,l.useState)(null),[f,N]=(0,l.useState)(!1),[y,_]=(0,l.useState)(!1),[C,w]=(0,l.useState)(!1),[S,k]=(0,l.useState)(i),[E,M]=(0,l.useState)(i);(0,l.useEffect)(()=>{let e=!0;return c(!0),(0,d.rw)().then(t=>{e&&(b(t.items),u(null))}).catch(()=>{e&&u("Failed to load tags.")}).finally(()=>{e&&c(!1)}),()=>{e=!1}},[]);let T=(0,l.useMemo)(()=>{let e=p.trim().toLowerCase();return e?g.filter(t=>{var s;return[t.en_name,t.mm_name,t.slug,null!==(s=t.description)&&void 0!==s?s:""].join(" ").toLowerCase().includes(e)}):g},[g,p]);async function D(e){if(e.preventDefault(),!t){u("Admin session not found. Please login again.");return}o(!0),u(null);try{let e=await (0,d.oL)({en_name:S.en_name.trim(),mm_name:S.mm_name.trim(),slug:S.slug.trim(),description:S.description.trim()||void 0,active:S.active},t);b(t=>[e,...t]),k(i),N(!1)}catch(e){u("Failed to create tag.")}finally{o(!1)}}async function q(e){if(e.preventDefault(),t&&j){o(!0),u(null);try{let e=await (0,d.PE)(j.id,{en_name:E.en_name.trim(),mm_name:E.mm_name.trim(),slug:E.slug.trim(),description:E.description.trim()||void 0,active:E.active},t);b(t=>t.map(t=>t.id===e.id?e:t)),v(e),w(!1)}catch(e){u("Failed to update tag.")}finally{o(!1)}}}return(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-slate-900",children:"Sustainability Tags"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Create, update and inspect catalog tags."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[T.length," tag(s)"]}),(0,a.jsx)("button",{className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white",onClick:()=>N(!0),type:"button",children:"Create Tag"})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("input",{className:"w-full max-w-sm rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Search tag by en/mm name or slug",value:p,onChange:e=>h(e.target.value)})}),x?(0,a.jsx)("p",{className:"mt-3 text-sm text-red-700",children:x}):null,(0,a.jsx)("div",{className:"mt-4 overflow-x-auto rounded-xl border border-slate-200",children:(0,a.jsxs)("table",{className:"w-full min-w-[760px] border-collapse",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[(0,a.jsx)("th",{className:"px-3 py-3",children:"#"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"EN Name"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"MM Name"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Slug"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Status"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Action"})]})}),(0,a.jsxs)("tbody",{children:[T.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t border-slate-100 text-sm text-slate-700",children:[(0,a.jsx)("td",{className:"px-3 py-3",children:t+1}),(0,a.jsx)("td",{className:"px-3 py-3 font-medium text-slate-900",children:e.en_name}),(0,a.jsx)("td",{className:"px-3 py-3",children:e.mm_name}),(0,a.jsx)("td",{className:"px-3 py-3",children:e.slug}),(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsx)("span",{className:e.active?"rounded-full bg-emerald-100 px-2 py-1 text-xs font-medium text-emerald-700":"rounded-full bg-slate-200 px-2 py-1 text-xs font-medium text-slate-700",children:e.active?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"rounded-md border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700",onClick:()=>{v(e),_(!0)},type:"button",children:"Detail"}),(0,a.jsx)("button",{className:"rounded-md border border-blue-500 px-3 py-1 text-xs font-medium text-blue-700",onClick:()=>{var t;v(e),M({en_name:e.en_name,mm_name:e.mm_name,slug:e.slug,description:null!==(t=e.description)&&void 0!==t?t:"",active:e.active}),w(!0)},type:"button",children:"Update"})]})})]},e.id)),s||0!==T.length?null:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-3 py-6 text-sm text-slate-500",colSpan:6,children:"No tags found."})})]})]})}),(0,a.jsx)(n.Z,{open:f,title:"Create Tag",onClose:()=>N(!1),children:(0,a.jsxs)("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:D,children:[(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Tag EN name",required:!0,value:S.en_name,onChange:e=>k(t=>({...t,en_name:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Tag MM name",required:!0,value:S.mm_name,onChange:e=>k(t=>({...t,mm_name:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Slug",required:!0,value:S.slug,onChange:e=>k(t=>({...t,slug:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm md:col-span-2",placeholder:"Description",value:S.description,onChange:e=>k(t=>({...t,description:e.target.value}))}),(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[(0,a.jsx)("input",{checked:S.active,onChange:e=>k(t=>({...t,active:e.target.checked})),type:"checkbox"}),"Active"]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700",onClick:()=>N(!1),type:"button",children:"Cancel"}),(0,a.jsx)("button",{className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-60",disabled:!e||m,type:"submit",children:m?"Saving...":"Create"})]})]})}),(0,a.jsx)(n.Z,{open:y,title:"Tag Detail",onClose:()=>_(!1),children:j?(0,a.jsxs)("div",{className:"grid gap-3 text-sm text-slate-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"EN Name"}),(0,a.jsx)("p",{className:"font-medium text-slate-900",children:j.en_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"MM Name"}),(0,a.jsx)("p",{className:"font-medium text-slate-900",children:j.mm_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Slug"}),(0,a.jsx)("p",{children:j.slug})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Description"}),(0,a.jsx)("p",{children:j.description||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Status"}),(0,a.jsx)("p",{children:j.active?"Active":"Inactive"})]})]}):null}),(0,a.jsx)(n.Z,{open:C,title:"Update Tag",onClose:()=>w(!1),children:(0,a.jsxs)("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:q,children:[(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Tag EN name",required:!0,value:E.en_name,onChange:e=>M(t=>({...t,en_name:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Tag MM name",required:!0,value:E.mm_name,onChange:e=>M(t=>({...t,mm_name:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Slug",required:!0,value:E.slug,onChange:e=>M(t=>({...t,slug:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm md:col-span-2",placeholder:"Description",value:E.description,onChange:e=>M(t=>({...t,description:e.target.value}))}),(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 md:col-span-2",children:[(0,a.jsx)("input",{checked:E.active,onChange:e=>M(t=>({...t,active:e.target.checked})),type:"checkbox"}),"Active"]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700",onClick:()=>w(!1),type:"button",children:"Cancel"}),(0,a.jsx)("button",{className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-60",disabled:m,type:"submit",children:m?"Saving...":"Update"})]})]})})]})}},3499:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(5964);function l(e){let{open:t,title:s,onClose:l,children:n}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-slate-900/40 p-4 pt-16",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl rounded-2xl border border-slate-200 bg-white shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:s}),(0,a.jsx)("button",{className:"rounded-md border border-slate-300 px-3 py-1 text-sm text-slate-700 hover:bg-slate-100",onClick:l,type:"button",children:"Close"})]}),(0,a.jsx)("div",{className:"max-h-[75vh] overflow-y-auto p-5",children:n})]})}):null}},3781:function(e,t,s){"use strict";s.d(t,{m:function(){return d}});var a=s(800),l=s(6290),n=s(3178),r=s(2207);function d(){let e=(0,r.usePathname)(),[t,s]=(0,a.useState)(!1),[d,i]=(0,a.useState)(void 0),c=()=>{var e;i(null!==(e=(0,l.zf)(n.Qs))&&void 0!==e?e:void 0)};return(0,a.useEffect)(()=>{c(),s(!0)},[e]),(0,a.useEffect)(()=>{let e=()=>{c(),s(!0)};return window.addEventListener(n.UY,e),()=>{window.removeEventListener(n.UY,e)}},[]),{ready:t,accessToken:d}}}},function(e){e.O(0,[320,716,550,744],function(){return e(e.s=9899)}),_N_E=e.O()}]);