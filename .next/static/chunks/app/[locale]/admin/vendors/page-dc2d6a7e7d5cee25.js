(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{5546:function(e,t,s){Promise.resolve().then(s.bind(s,8742))},2207:function(e,t,s){"use strict";s.r(t);var a=s(5373),r={};for(var l in a)"default"!==l&&(r[l]=(function(e){return a[e]}).bind(0,l));s.d(t,r)},8742:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(5964),r=s(800),l=s(3499),n=s(3781),d=s(3678);let i={ownerEmail:"",name:"",country:"US",currency:"USD",commissionPct:"10",status:"PENDING"};function o(e){return new Date(e).toLocaleString()}function c(){var e,t;let{ready:s,accessToken:c}=(0,n.m)(),[u,m]=(0,r.useState)(!0),[x,p]=(0,r.useState)(!1),[h,y]=(0,r.useState)(null),[b,j]=(0,r.useState)(""),[v,N]=(0,r.useState)([]),[f,g]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),[E,P]=(0,r.useState)(!1),[S,D]=(0,r.useState)(null),[U,V]=(0,r.useState)(i),[O,k]=(0,r.useState)(i);async function A(e){N((await (0,d.nA)(e)).items)}(0,r.useEffect)(()=>{if(!s)return;if(!c){y("Admin session not found. Please login again."),m(!1);return}let e=!0;return m(!0),A(c).then(()=>{e&&y(null)}).catch(()=>{e&&y("Failed to load vendors.")}).finally(()=>{e&&m(!1)}),()=>{e=!1}},[s,c]);let q=(0,r.useMemo)(()=>{let e=b.trim().toLowerCase();return e?v.filter(t=>{var s,a;return[t.name,t.country,t.currency,t.status,t.id,null!==(a=null===(s=t.owner)||void 0===s?void 0:s.email)&&void 0!==a?a:""].join(" ").toLowerCase().includes(e)}):v},[v,b]);async function R(e){if(e.preventDefault(),!c){y("Admin session not found. Please login again.");return}p(!0),y(null);try{await (0,d.tU)({ownerEmail:U.ownerEmail.trim(),name:U.name.trim(),country:U.country.trim().toUpperCase(),currency:U.currency.trim().toUpperCase(),commissionPct:Number(U.commissionPct),status:U.status},c),await A(c),g(!1),V(i)}catch(e){y("Failed to create vendor. Ensure owner email exists with VENDOR role.")}finally{p(!1)}}async function _(e){if(c){p(!0),y(null);try{let t=await (0,d.XY)(e,c);D(t),C(!0)}catch(e){y("Failed to load vendor detail.")}finally{p(!1)}}}async function F(e){if(c){p(!0),y(null);try{var t,s;let a=await (0,d.XY)(e,c);D(a),k({ownerEmail:null!==(s=null===(t=a.owner)||void 0===t?void 0:t.email)&&void 0!==s?s:"",name:a.name,country:a.country,currency:a.currency,commissionPct:String(a.commissionPct),status:a.status}),P(!0)}catch(e){y("Failed to load vendor update form.")}finally{p(!1)}}}async function G(e){if(e.preventDefault(),c&&S){p(!0),y(null);try{let e=await (0,d.bD)(S.id,{name:O.name.trim(),country:O.country.trim().toUpperCase(),currency:O.currency.trim().toUpperCase(),commissionPct:Number(O.commissionPct),status:O.status},c);N(t=>t.map(t=>t.id===e.id?e:t)),D(e),P(!1)}catch(e){y("Failed to update vendor.")}finally{p(!1)}}}async function I(e){if(c){p(!0),y(null);try{let t=await (0,d._X)(e,c);N(e=>e.map(e=>e.id===t.id?t:e))}catch(e){y("Failed to approve vendor.")}finally{p(!1)}}}async function M(e){if(c){p(!0),y(null);try{let t=await (0,d.$_)(e,c);N(e=>e.map(e=>e.id===t.id?t:e))}catch(e){y("Failed to suspend vendor.")}finally{p(!1)}}}return(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-slate-900",children:"Vendor Management"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Create, update, detail and approve vendors."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[q.length," vendor(s)"]}),(0,a.jsx)("button",{className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white",onClick:()=>g(!0),type:"button",children:"Create Vendor"})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("input",{className:"w-full max-w-md rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Search vendor name, country, status or email...",value:b,onChange:e=>j(e.target.value)})}),h?(0,a.jsx)("p",{className:"mt-3 text-sm text-red-700",children:h}):null,(0,a.jsx)("div",{className:"mt-4 overflow-x-auto rounded-xl border border-slate-200",children:(0,a.jsxs)("table",{className:"w-full min-w-[1050px] border-collapse",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[(0,a.jsx)("th",{className:"px-3 py-3",children:"#"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Vendor"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Owner"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Country"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Currency"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Commission"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Status"}),(0,a.jsx)("th",{className:"px-3 py-3",children:"Action"})]})}),(0,a.jsxs)("tbody",{children:[q.map((e,t)=>{var s,r;return(0,a.jsxs)("tr",{className:"border-t border-slate-100 text-sm text-slate-700",children:[(0,a.jsx)("td",{className:"px-3 py-3",children:t+1}),(0,a.jsxs)("td",{className:"px-3 py-3",children:[(0,a.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:e.id})]}),(0,a.jsx)("td",{className:"px-3 py-3",children:null!==(r=null===(s=e.owner)||void 0===s?void 0:s.email)&&void 0!==r?r:"-"}),(0,a.jsx)("td",{className:"px-3 py-3",children:e.country}),(0,a.jsx)("td",{className:"px-3 py-3",children:e.currency}),(0,a.jsxs)("td",{className:"px-3 py-3",children:[e.commissionPct,"%"]}),(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsx)("span",{className:"APPROVED"===e.status?"rounded-full bg-emerald-100 px-2 py-1 text-xs font-medium text-emerald-700":"PENDING"===e.status?"rounded-full bg-amber-100 px-2 py-1 text-xs font-medium text-amber-700":"rounded-full bg-rose-100 px-2 py-1 text-xs font-medium text-rose-700",children:e.status})}),(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{className:"rounded-md border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700",onClick:()=>_(e.id),type:"button",children:"Detail"}),(0,a.jsx)("button",{className:"rounded-md border border-blue-500 px-3 py-1 text-xs font-medium text-blue-700",onClick:()=>F(e.id),type:"button",children:"Update"}),(0,a.jsx)("button",{className:"rounded-md border border-emerald-500 px-3 py-1 text-xs font-medium text-emerald-700 disabled:opacity-50",disabled:x||"APPROVED"===e.status,onClick:()=>I(e.id),type:"button",children:"Approve"}),(0,a.jsx)("button",{className:"rounded-md border border-rose-500 px-3 py-1 text-xs font-medium text-rose-700 disabled:opacity-50",disabled:x||"SUSPENDED"===e.status,onClick:()=>M(e.id),type:"button",children:"Suspend"})]})})]},e.id)}),u||0!==q.length?null:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-3 py-6 text-sm text-slate-500",colSpan:8,children:"No vendors found."})})]})]})}),(0,a.jsx)(l.Z,{open:f,title:"Create Vendor",onClose:()=>g(!1),children:(0,a.jsxs)("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:R,children:[(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm md:col-span-2",placeholder:"Owner email (must be VENDOR role)",required:!0,value:U.ownerEmail,onChange:e=>V(t=>({...t,ownerEmail:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm md:col-span-2",placeholder:"Vendor name",required:!0,value:U.name,onChange:e=>V(t=>({...t,name:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Country (US/MM)",required:!0,value:U.country,onChange:e=>V(t=>({...t,country:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Currency (USD/MMK)",required:!0,value:U.currency,onChange:e=>V(t=>({...t,currency:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",min:0,max:100,placeholder:"Commission %",required:!0,type:"number",value:U.commissionPct,onChange:e=>V(t=>({...t,commissionPct:e.target.value}))}),(0,a.jsxs)("select",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",value:U.status,onChange:e=>V(t=>({...t,status:e.target.value})),children:[(0,a.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,a.jsx)("option",{value:"APPROVED",children:"APPROVED"}),(0,a.jsx)("option",{value:"SUSPENDED",children:"SUSPENDED"})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700",onClick:()=>g(!1),type:"button",children:"Cancel"}),(0,a.jsx)("button",{className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-60",disabled:x,type:"submit",children:x?"Saving...":"Create"})]})]})}),(0,a.jsx)(l.Z,{open:w,title:"Vendor Detail",onClose:()=>C(!1),children:S?(0,a.jsxs)("div",{className:"grid gap-3 text-sm text-slate-700 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Name"}),(0,a.jsx)("p",{className:"font-medium text-slate-900",children:S.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Owner Email"}),(0,a.jsx)("p",{className:"font-medium text-slate-900",children:null!==(t=null===(e=S.owner)||void 0===e?void 0:e.email)&&void 0!==t?t:"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Country"}),(0,a.jsx)("p",{children:S.country})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Currency"}),(0,a.jsx)("p",{children:S.currency})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Commission"}),(0,a.jsxs)("p",{children:[S.commissionPct,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Status"}),(0,a.jsx)("p",{children:S.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Created"}),(0,a.jsx)("p",{children:o(S.createdAt)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-slate-500",children:"Updated"}),(0,a.jsx)("p",{children:o(S.updatedAt)})]})]}):null}),(0,a.jsx)(l.Z,{open:E,title:"Update Vendor",onClose:()=>P(!1),children:(0,a.jsxs)("form",{className:"grid gap-3 md:grid-cols-2",onSubmit:G,children:[(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 bg-slate-100 px-3 py-2 text-sm md:col-span-2",disabled:!0,placeholder:"Owner email",value:O.ownerEmail}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm md:col-span-2",placeholder:"Vendor name",required:!0,value:O.name,onChange:e=>k(t=>({...t,name:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Country",required:!0,value:O.country,onChange:e=>k(t=>({...t,country:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Currency",required:!0,value:O.currency,onChange:e=>k(t=>({...t,currency:e.target.value}))}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",min:0,max:100,placeholder:"Commission %",required:!0,type:"number",value:O.commissionPct,onChange:e=>k(t=>({...t,commissionPct:e.target.value}))}),(0,a.jsxs)("select",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",value:O.status,onChange:e=>k(t=>({...t,status:e.target.value})),children:[(0,a.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,a.jsx)("option",{value:"APPROVED",children:"APPROVED"}),(0,a.jsx)("option",{value:"SUSPENDED",children:"SUSPENDED"})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700",onClick:()=>P(!1),type:"button",children:"Cancel"}),(0,a.jsx)("button",{className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-60",disabled:x,type:"submit",children:x?"Saving...":"Update"})]})]})})]})}},3499:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5964);function r(e){let{open:t,title:s,onClose:r,children:l}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-slate-900/40 p-4 pt-16",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl rounded-2xl border border-slate-200 bg-white shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:s}),(0,a.jsx)("button",{className:"rounded-md border border-slate-300 px-3 py-1 text-sm text-slate-700 hover:bg-slate-100",onClick:r,type:"button",children:"Close"})]}),(0,a.jsx)("div",{className:"max-h-[75vh] overflow-y-auto p-5",children:l})]})}):null}},3781:function(e,t,s){"use strict";s.d(t,{m:function(){return d}});var a=s(800),r=s(6290),l=s(3178),n=s(2207);function d(){let e=(0,n.usePathname)(),[t,s]=(0,a.useState)(!1),[d,i]=(0,a.useState)(void 0),o=()=>{var e;i(null!==(e=(0,r.zf)(l.Qs))&&void 0!==e?e:void 0)};return(0,a.useEffect)(()=>{o(),s(!0)},[e]),(0,a.useEffect)(()=>{let e=()=>{o(),s(!0)};return window.addEventListener(l.UY,e),()=>{window.removeEventListener(l.UY,e)}},[]),{ready:t,accessToken:d}}}},function(e){e.O(0,[320,716,550,744],function(){return e(e.s=5546)}),_N_E=e.O()}]);