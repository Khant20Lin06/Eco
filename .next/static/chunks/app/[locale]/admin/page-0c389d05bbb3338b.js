(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{963:function(e,t,s){Promise.resolve().then(s.bind(s,2741))},2741:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(5964),l=s(4141),n=s(800),r=s(3678),d=s(3781);function c(e){let{params:{locale:t}}=e,{ready:s,accessToken:c}=(0,d.m)(),[i,o]=(0,n.useState)(!0),[x,m]=(0,n.useState)(null),[u,h]=(0,n.useState)({userCount:0,vendorCount:0,pendingVendorCount:0}),[p,f]=(0,n.useState)([]),[N,b]=(0,n.useState)([]),[j,g]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!s)return;if(!c){m("Admin session not found. Please login again."),o(!1);return}let e=!0;return o(!0),Promise.all([(0,r.kJ)(c),(0,r.nA)(c),(0,r.rw)(),(0,r.kb)()]).then(t=>{let[s,a,l,n]=t;e&&(h(s),f(a.items),b(l.items),g(n.items),m(null))}).catch(()=>{e&&m("Failed to load admin dashboard data.")}).finally(()=>{e&&o(!1)}),()=>{e=!1}},[s,c]);let v=(0,n.useMemo)(()=>u.pendingVendorCount>0||0===p.length?u.pendingVendorCount:p.filter(e=>"PENDING"===e.status).length,[u.pendingVendorCount,p]);return(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Users"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:i?"-":u.userCount}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"All customer/vendor/admin accounts"})]}),(0,a.jsxs)("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Vendors"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:i?"-":u.vendorCount}),(0,a.jsx)("p",{className:"mt-1 text-xs text-amber-700",children:i?"":"".concat(v," pending approval")})]}),(0,a.jsxs)("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Active Tags"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:i?"-":N.length}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Public catalog tags"})]}),(0,a.jsxs)("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Categories"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:i?"-":j.length}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Catalog taxonomy nodes"})]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Recent Vendor Applications"}),(0,a.jsx)(l.default,{className:"text-sm font-medium text-blue-700 hover:underline",href:"/".concat(t,"/admin/vendors"),children:"Manage vendors"})]}),x?(0,a.jsx)("p",{className:"mt-3 text-sm text-red-700",children:x}):null,(0,a.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[560px] border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-slate-200 text-left text-xs uppercase tracking-wide text-slate-500",children:[(0,a.jsx)("th",{className:"py-2 pr-3",children:"Name"}),(0,a.jsx)("th",{className:"py-2 pr-3",children:"Status"}),(0,a.jsx)("th",{className:"py-2 pr-3",children:"Created"})]})}),(0,a.jsxs)("tbody",{children:[p.slice(0,5).map(e=>(0,a.jsxs)("tr",{className:"border-b border-slate-100 text-sm text-slate-700",children:[(0,a.jsx)("td",{className:"py-3 pr-3",children:e.name}),(0,a.jsx)("td",{className:"py-3 pr-3",children:(0,a.jsx)("span",{className:"APPROVED"===e.status?"rounded-full bg-emerald-100 px-2 py-1 text-xs font-medium text-emerald-700":"PENDING"===e.status?"rounded-full bg-amber-100 px-2 py-1 text-xs font-medium text-amber-700":"rounded-full bg-rose-100 px-2 py-1 text-xs font-medium text-rose-700",children:e.status})}),(0,a.jsx)("td",{className:"py-3 pr-3",children:new Date(e.createdAt).toLocaleDateString()})]},e.id)),i||0!==p.length?null:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"py-5 text-sm text-slate-500",colSpan:3,children:"No vendors found."})})]})]})})]})]})}},3781:function(e,t,s){"use strict";s.d(t,{m:function(){return d}});var a=s(800),l=s(6290),n=s(3178),r=s(2207);function d(){let e=(0,r.usePathname)(),[t,s]=(0,a.useState)(!1),[d,c]=(0,a.useState)(void 0),i=()=>{var e;c(null!==(e=(0,l.zf)(n.Qs))&&void 0!==e?e:void 0)};return(0,a.useEffect)(()=>{i(),s(!0)},[e]),(0,a.useEffect)(()=>{let e=()=>{i(),s(!0)};return window.addEventListener(n.UY,e),()=>{window.removeEventListener(n.UY,e)}},[]),{ready:t,accessToken:d}}}},function(e){e.O(0,[46,320,716,550,744],function(){return e(e.s=963)}),_N_E=e.O()}]);