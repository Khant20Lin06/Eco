(()=>{var e={};e.id=70,e.ids=[70],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},612:e=>{"use strict";e.exports=require("node:os")},7742:e=>{"use strict";e.exports=require("node:process")},5997:e=>{"use strict";e.exports=require("node:tty")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},381:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(8149),i=r(2658),a=r(9457),n=r.n(a),o=r(9960),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["[locale]",{children:["product",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,962)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\product\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4208)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,6738)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7066,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\product\\[id]\\page.tsx"],u="/[locale]/product/[id]/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/[locale]/product/[id]/page",pathname:"/[locale]/product/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1992:(e,t,r)=>{Promise.resolve().then(r.bind(r,5411))},5411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(241),i=r(8170),a=r(8895),n=r(1662),o=r(4045),l=r(2999),c=r(9788);function d({params:{locale:e,id:t}}){var r,d;let u=(0,a.useRouter)(),{accessToken:x}=(0,l._)(),[p,m]=(0,n.useState)(!0),[f,h]=(0,n.useState)(null),[g,b]=(0,n.useState)(null),[v,j]=(0,n.useState)(null),[y,N]=(0,n.useState)(""),[q,w]=(0,n.useState)(1),[P,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let r=!0;return m(!0),(0,o.wv)(t,{locale:e}).then(e=>{r&&(j(e),N(e.variants[0]?.id??""),h(null))}).catch(()=>{r&&h("Product not found or unavailable.")}).finally(()=>{r&&m(!1)}),()=>{r=!1}},[t,e]),(0,n.useEffect)(()=>{if(!x||!v){_(!1);return}let e=!0;return(0,o.FS)(x).then(t=>{e&&_(t.items.some(e=>e.productId===v.id))}).catch(()=>{e&&_(!1)}),()=>{e=!1}},[x,v]);let k=(0,n.useMemo)(()=>v?.variants.find(e=>e.id===y)??v?.variants[0],[v,y]);async function S(){if(!k){b("No purchasable variant.");return}if(!x){b("Please login before adding to cart."),u.push(`/${e}/login`);return}if(q<1){b("Quantity must be at least 1.");return}try{await (0,o._7)({variantId:k.id,qty:q},x),(0,c.t)(),b("Added to cart."),h(null),u.push(`/${e}/cart`)}catch(t){t instanceof Error&&t.message.includes("409")?(b("Single-vendor cart only. Remove current cart items first."),u.push(`/${e}/cart`)):b("Failed to add to cart.")}}async function D(){if(v){if(!x){b("Please login first."),u.push(`/${e}/login`);return}try{P?(await (0,o.Q9)(v.id,x),_(!1),(0,c.t)(),b("Removed from wishlist.")):(await (0,o.Ln)(v.id,x),_(!0),(0,c.t)(),b("Saved to wishlist."))}catch{b("Failed to update wishlist.")}}}return p?s.jsx("section",{className:"surface p-6 text-sm text-[#58608a]",children:"Loading product..."}):!v||f?(0,s.jsxs)("section",{className:"surface p-6",children:[s.jsx("p",{className:"text-sm text-[#b12f43]",children:f??"Product unavailable."}),s.jsx(i.default,{className:"mt-4 inline-flex text-sm font-semibold text-[#3550c0] underline",href:`/${e}/products`,children:"Back to products"})]}):s.jsx("section",{className:"space-y-4",children:s.jsx("div",{className:"surface overflow-hidden p-5 md:p-6",children:(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_1.1fr]",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("div",{className:"overflow-hidden rounded-2xl border border-[#d8e1ff] bg-[#f2f6ff]",children:v.images[0]?.url?s.jsx("img",{alt:v.title,className:"h-[320px] w-full object-cover",src:v.images[0].url}):s.jsx("div",{className:"grid h-[320px] place-items-center text-sm text-[#69729b]",children:"No image"})}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:v.images.slice(0,4).map(e=>s.jsx("div",{className:"overflow-hidden rounded-xl border border-[#d9e2ff] bg-white",children:s.jsx("img",{alt:e.altText??v.title,className:"h-20 w-full object-cover",src:e.url})},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-[#6270a6]",children:v.category?.name??"Catalog"}),s.jsx("h1",{className:"mt-1 text-3xl font-semibold text-[#171e44]",children:v.title}),s.jsx("p",{className:"mt-2 text-sm leading-6 text-[#596389]",children:v.description})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(v.tags??[]).map(e=>s.jsx("span",{className:"chip bg-[#eef3ff] text-[#44539a]",children:e.tag?.name??e.tagId},e.id))}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[#d7e0ff] bg-[#f8faff] p-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-[#334177]",children:["Variant",s.jsx("select",{className:"mt-2 w-full rounded-xl border border-[#cfd9ff] bg-white px-3 py-2 text-sm text-[#1d2551]",value:k?.id??"",onChange:e=>N(e.target.value),children:v.variants.map(e=>s.jsx("option",{value:e.id,children:e.options&&0!==e.options.length?`${e.options.map(e=>`${e.name}: ${e.value}`).join(" / ")} (${e.sku})`:e.sku},e.id))})]}),(0,s.jsxs)("div",{className:"mt-3 grid gap-3 sm:grid-cols-[1fr_auto]",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-[#334177]",children:["Quantity",s.jsx("input",{className:"mt-2 w-full rounded-xl border border-[#cfd9ff] bg-white px-3 py-2 text-sm text-[#1d2551]",type:"number",min:1,value:q,onChange:e=>w(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-[#d3dcff] bg-white px-4 py-3 text-right",children:[s.jsx("p",{className:"text-xs text-[#60709e]",children:"Price"}),s.jsx("p",{className:"text-lg font-semibold text-[#17204d]",children:k?(r=k.price,d=k.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK"===d?"MMK":"USD",maximumFractionDigits:"MMK"===d?0:2}).format(r/("USD"===d?100:1))):"-"}),(0,s.jsxs)("p",{className:"text-xs text-[#60709e]",children:["Stock ",k?.stockQty??0]})]})]})]}),g?s.jsx("p",{className:"text-sm text-[#2a4ea0]",children:g}):null,(0,s.jsxs)("div",{className:"grid gap-2 sm:grid-cols-3",children:[s.jsx("button",{className:"btn-primary rounded-xl px-4 py-2 text-sm font-semibold",onClick:S,type:"button",children:"Add to cart"}),s.jsx("button",{className:P?"rounded-xl border border-[#f3b4c0] bg-[#fff0f3] px-4 py-2 text-sm font-semibold text-[#b73249]":"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",onClick:D,type:"button",children:P?"Saved":"Save"}),s.jsx(i.default,{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-center text-sm font-semibold text-[#3349ad]",href:`/${e}/cart`,children:"Go to cart"})]})]})]})})})}},962:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>n});let s=(0,r(3596).createProxy)(String.raw`C:\Users\Admin\OneDrive\Desktop\Project\eco\frontend\src\app\[locale]\product\[id]\page.tsx`),{__esModule:i,$$typeof:a}=s,n=s.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[563,851,482,382],()=>r(381));module.exports=s})();