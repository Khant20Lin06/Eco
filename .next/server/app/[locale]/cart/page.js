(()=>{var e={};e.id=123,e.ids=[123],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},612:e=>{"use strict";e.exports=require("node:os")},7742:e=>{"use strict";e.exports=require("node:process")},5997:e=>{"use strict";e.exports=require("node:tty")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4276:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>c.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=r(8149),i=r(2658),n=r(9457),c=r.n(n),a=r(9960),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(t,o);let l=["",{children:["[locale]",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,609)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\cart\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4208)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,6738)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7066,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\cart\\page.tsx"],u="/[locale]/cart/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/[locale]/cart/page",pathname:"/[locale]/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},86:(e,t,r)=>{Promise.resolve().then(r.bind(r,2537))},2537:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(241),i=r(8170),n=r(1662),c=r(4045),a=r(2999),o=r(9788);function l(e,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK"===t?"MMK":"USD",maximumFractionDigits:"MMK"===t?0:2}).format(e/("USD"===t?100:1))}function d({params:{locale:e}}){let{ready:t,accessToken:r}=(0,a._)(),[d,u]=(0,n.useState)(!0),[x,p]=(0,n.useState)(!1),[m,f]=(0,n.useState)(null),[h,y]=(0,n.useState)({items:[]});async function g(e){let t=await (0,c.dv)(e);y({items:t.items??[],id:t.id,vendorId:t.vendorId,currency:t.currency})}(0,n.useEffect)(()=>{if(!t)return;if(!r){f("Please login to view cart."),u(!1);return}let e=!0;return u(!0),g(r).then(()=>{e&&f(null)}).catch(()=>{e&&f("Failed to load cart.")}).finally(()=>{e&&u(!1)}),()=>{e=!1}},[t,r]);let j=h.currency??h.items[0]?.variant.currency??"USD",b=(0,n.useMemo)(()=>h.items.reduce((e,t)=>e+t.unitPrice*t.qty,0),[h.items]);async function v(e,t){if(r&&!(t<1)){p(!0);try{let s=await (0,c.bd)(e,{qty:t},r);y({items:s.items??[],id:s.id,vendorId:s.vendorId,currency:s.currency}),f(null),(0,o.t)()}catch{f("Failed to update item quantity.")}finally{p(!1)}}}async function q(e){if(r){p(!0);try{await (0,c.B8)(e,r),await g(r),f(null),(0,o.t)()}catch{f("Failed to remove item.")}finally{p(!1)}}}return(0,s.jsxs)("section",{className:"space-y-4",children:[s.jsx("div",{className:"surface p-5 md:p-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-[#181f46]",children:"Your Cart"}),s.jsx("p",{className:"mt-1 text-sm text-[#5d6486]",children:"Single-vendor checkout only. Keep items from one vendor per cart."})]}),s.jsx(i.default,{className:"rounded-xl border border-[#c7d4ff] bg-white px-4 py-2 text-sm font-semibold text-[#3349ad]",href:`/${e}/products`,children:"Continue shopping"})]})}),m?s.jsx("div",{className:"surface border-[#ffd7dd] bg-[#fff5f6] p-4 text-sm text-[#b12f43]",children:m}):null,(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[1fr_320px]",children:[s.jsx("div",{className:"surface p-4",children:d?s.jsx("p",{className:"text-sm text-[#5d6486]",children:"Loading cart..."}):0===h.items.length?s.jsx("p",{className:"text-sm text-[#5d6486]",children:"Your cart is empty."}):s.jsx("div",{className:"space-y-3",children:h.items.map(e=>s.jsx("article",{className:"rounded-xl border border-[#d8e1ff] bg-[#fbfcff] p-3",children:(0,s.jsxs)("div",{className:"grid gap-2 sm:grid-cols-[1fr_auto] sm:items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-[#1d2551]",children:e.variant.product?.title??"Product"}),(0,s.jsxs)("p",{className:"text-xs text-[#6270a6]",children:["Variant ID: ",e.variant.id]}),(0,s.jsxs)("p",{className:"text-xs text-[#6270a6]",children:["Unit: ",l(e.unitPrice,e.variant.currency)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{className:"w-20 rounded-lg border border-[#cfd9ff] bg-white px-2 py-1.5 text-sm",type:"number",min:1,value:e.qty,onChange:t=>v(e.id,Number(t.target.value)),disabled:x}),s.jsx("button",{className:"rounded-lg border border-[#ffc2cd] bg-white px-3 py-1.5 text-xs font-semibold text-[#c33f53]",onClick:()=>q(e.id),type:"button",disabled:x,children:"Remove"})]})]})},e.id))})}),(0,s.jsxs)("aside",{className:"surface h-fit p-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-[#181f46]",children:"Summary"}),(0,s.jsxs)("dl",{className:"mt-3 space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-[#5d6486]",children:[s.jsx("dt",{children:"Items"}),s.jsx("dd",{children:h.items.length})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-[#5d6486]",children:[s.jsx("dt",{children:"Subtotal"}),s.jsx("dd",{className:"font-medium text-[#1e2756]",children:l(b,j)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-[#5d6486]",children:[s.jsx("dt",{children:"Shipping"}),s.jsx("dd",{children:"Calculated at checkout"})]})]}),s.jsx(i.default,{className:"btn-primary mt-5 block rounded-xl px-4 py-2 text-center text-sm font-semibold",href:`/${e}/checkout`,children:"Proceed to checkout"})]})]})]})}},609:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});let s=(0,r(3596).createProxy)(String.raw`C:\Users\Admin\OneDrive\Desktop\Project\eco\frontend\src\app\[locale]\cart\page.tsx`),{__esModule:i,$$typeof:n}=s,c=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[563,851,482,382],()=>r(4276));module.exports=s})();