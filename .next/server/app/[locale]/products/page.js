(()=>{var e={};e.id=124,e.ids=[124],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},612:e=>{"use strict";e.exports=require("node:os")},7742:e=>{"use strict";e.exports=require("node:process")},5997:e=>{"use strict";e.exports=require("node:tty")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2464:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(8149),a=s(2658),i=s(9457),n=s.n(i),l=s(9960),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["[locale]",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3701)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4208)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6738)),"C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7066,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Admin\\OneDrive\\Desktop\\Project\\eco\\frontend\\src\\app\\[locale]\\products\\page.tsx"],u="/[locale]/products/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[locale]/products/page",pathname:"/[locale]/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},351:(e,t,s)=>{Promise.resolve().then(s.bind(s,8407))},8407:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(241),a=s(8170),i=s(1662),n=s(8895),l=s(4045),o=s(857),d=s(2999),c=s(9788),u=s(2946);function x({filled:e}){return r.jsx("svg",{"aria-hidden":"true",className:"h-4 w-4",fill:e?"currentColor":"none",viewBox:"0 0 24 24",children:r.jsx("path",{d:"m20.84 4.61-.01-.01a5.5 5.5 0 0 0-7.78 0L12 5.65l-1.05-1.04a5.5 5.5 0 0 0-7.78 7.78l1.05 1.04L12 21l7.78-7.57 1.05-1.04a5.5 5.5 0 0 0 .01-7.78z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.8"})})}function m({params:{locale:e}}){let t=(0,n.useSearchParams)(),s=(0,n.useRouter)(),m=t.get("categoryId")??"",p=t.get("q")??"",{accessToken:f}=(0,d._)(),[h,b]=(0,i.useState)(!0),[g,v]=(0,i.useState)(null),[j,y]=(0,i.useState)(null),[N,w]=(0,i.useState)([]),[S,C]=(0,i.useState)([]),[k,q]=(0,i.useState)([]),[P,_]=(0,i.useState)([]),[M,D]=(0,i.useState)(null),[A,$]=(0,i.useState)((0,u.CJ)()),[E,U]=(0,i.useState)(p),[F,L]=(0,i.useState)(m),[K,I]=(0,i.useState)("");(0,i.useEffect)(()=>{L(m)},[m]),(0,i.useEffect)(()=>{U(p)},[p]),(0,i.useEffect)(()=>{let t=!0;return b(!0),Promise.all([(0,l.tr)({limit:30,locale:e}),(0,l.kb)({locale:e}),(0,l.rw)({locale:e})]).then(([e,s,r])=>{t&&(w(e.items),C(s.items),q(r.items),v(null))}).catch(()=>{t&&v("Failed to load products")}).finally(()=>{t&&b(!1)}),()=>{t=!1}},[]),(0,i.useEffect)(()=>{if(!f){_([]);return}let e=!0;return(0,l.FS)(f).then(t=>{e&&_(t.items.map(e=>e.productId))}).catch(()=>{e&&_([])}),()=>{e=!1}},[f]),(0,i.useEffect)(()=>{let e=e=>{let t=e.detail;$((0,u.FK)(t))};return window.addEventListener(u.jW,e),()=>{window.removeEventListener(u.jW,e)}},[]);let O=(0,i.useMemo)(()=>N.filter(e=>{let t=!E||`${e.title} ${e.description}`.toLowerCase().includes(E.toLowerCase()),s=!F||e.categoryId===F,r=!K||(e.tags??[]).some(e=>e.tagId===K),a=(0,u.FK)(e.variants[0]?.currency)===A;return t&&s&&r&&a}),[N,E,F,K,A]);async function G(t){if(M&&f)try{await (0,l._7)(t,f),(0,c.t)(),y(`Added "${M.title}" to cart`),D(null),s.push(`/${e}/cart`)}catch(t){t instanceof Error&&t.message.includes("409")?(y("Single-vendor cart only. Clear cart first."),D(null),s.push(`/${e}/cart`)):y("Failed to add item")}}async function Q(t){if(!f){y("Please login first."),s.push(`/${e}/login`);return}let r=P.includes(t.id);try{r?(await (0,l.Q9)(t.id,f),_(e=>e.filter(e=>e!==t.id)),(0,c.t)(),y("Removed from wishlist")):(await (0,l.Ln)(t.id,f),_(e=>[...e,t.id]),(0,c.t)(),y("Saved to wishlist"))}catch{y("Failed to update wishlist")}}return(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"surface p-5",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-[#181f46]",children:"Discover Sustainable Products"}),r.jsx("p",{className:"mt-1 text-sm text-[#5d6486]",children:"Search by keyword, category and sustainability tags."})]}),r.jsx(a.default,{className:"btn-secondary rounded-lg px-4 py-2 text-sm font-semibold",href:`/${e}/cart`,children:"Go To Cart"})]}),(0,r.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-4",children:[r.jsx("input",{className:"rounded-lg border border-[#d3dcff] bg-white px-3 py-2 text-sm",placeholder:"Search product name or detail",value:E,onChange:e=>U(e.target.value)}),(0,r.jsxs)("select",{className:"rounded-lg border border-[#d3dcff] bg-white px-3 py-2 text-sm",value:F,onChange:e=>L(e.target.value),children:[r.jsx("option",{value:"",children:"All categories"}),S.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsxs)("select",{className:"rounded-lg border border-[#d3dcff] bg-white px-3 py-2 text-sm",value:K,onChange:e=>I(e.target.value),children:[r.jsx("option",{value:"",children:"All tags"}),k.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsxs)("div",{className:"rounded-lg border border-[#d3dcff] bg-[#f9fbff] px-3 py-2 text-sm text-[#42538f]",children:[O.length," product(s) - ",A]})]}),g?r.jsx("p",{className:"mt-3 text-sm text-red-700",children:g}):null,j?r.jsx("p",{className:"mt-2 text-sm text-[#24316a]",children:j}):null]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:O.map(t=>{var i,n;let l=t.variants[0],o=t.images[0]?.url,d=P.includes(t.id);return(0,r.jsxs)("article",{className:"surface overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative h-44 w-full bg-gradient-to-br from-[#ffe7ed] to-[#e7ecff]",children:[r.jsx("button",{"aria-label":d?"Remove from wishlist":"Save to wishlist",className:`absolute right-3 top-3 z-10 inline-flex h-9 w-9 items-center justify-center rounded-full border backdrop-blur ${d?"border-[#ffb0be] bg-[#fff2f5] text-[#d93a54]":"border-white/70 bg-white/85 text-[#33417b]"}`,onClick:()=>Q(t),type:"button",children:r.jsx(x,{filled:d})}),o?r.jsx("img",{alt:t.title,className:"h-full w-full object-cover",src:o}):r.jsx("div",{className:"grid h-full place-items-center text-xs text-[#6b749c]",children:"No image"})]}),(0,r.jsxs)("div",{className:"space-y-3 p-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"line-clamp-1 text-base font-semibold text-[#1b2148]",children:t.title}),r.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-[#5d6486]",children:t.description})]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:(t.tags??[]).slice(0,3).map(e=>r.jsx("span",{className:"chip bg-[#f1f5ff] text-[#455599]",children:e.tag?.name??"tag"},e.id))}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm font-semibold text-[#19235f]",children:l?(i=l.price,n=l.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK"===n?"MMK":"USD",maximumFractionDigits:"MMK"===n?0:2}).format(i/("USD"===n?100:1))):"-"}),(0,r.jsxs)("span",{className:"text-xs text-[#5d6486]",children:["Stock ",l?.stockQty??0]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(a.default,{className:"rounded-lg border border-[#c9d6ff] px-3 py-2 text-center text-sm font-medium text-[#3d4d95]",href:`/${e}/product/${t.id}`,children:"Detail"}),r.jsx("button",{className:"rounded-lg border border-[#c9d6ff] bg-white px-3 py-2 text-sm font-semibold text-[#3d4d95]",onClick:()=>Q(t),type:"button",children:d?"Saved":"Save"}),r.jsx("button",{className:"btn-primary rounded-lg px-3 py-2 text-sm font-semibold",onClick:()=>(function(t){if(!f){y("Please login as customer/vendor first."),s.push(`/${e}/login`);return}if(0===t.variants.length){y("No purchasable variant.");return}D(t)})(t),type:"button",children:"Add Cart"})]})]})]},t.id)})}),h||0!==O.length?null:r.jsx("div",{className:"surface p-8 text-center text-sm text-[#5d6486]",children:"No products found."}),r.jsx(o.Z,{locale:e,onClose:()=>D(null),onConfirm:G,open:!!M,title:M?.title??"",variants:M?.variants??[]})]})}},857:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(241),a=s(1662);function i({open:e,title:t,variants:s,locale:i,onClose:n,onConfirm:l}){var o,d;let[c,u]=(0,a.useState)({}),[x,m]=(0,a.useState)(1),[p,f]=(0,a.useState)(!1),h=(0,a.useMemo)(()=>(function(e){let t=new Map;for(let s of e)for(let e of s.options??[])t.has(e.name)||t.set(e.name,new Set),t.get(e.name)?.add(e.value);return Array.from(t.entries()).map(([e,t])=>({name:e,values:Array.from(t)}))})(s),[s]),b=(0,a.useMemo)(()=>s.find(e=>0===h.length||h.every(t=>{let s=c[t.name];if(!s)return!1;let r=(e.options??[]).find(e=>e.name===t.name);return r?.value===s}))??(0===h.length?s[0]:void 0),[h,c,s]);if((0,a.useEffect)(()=>{if(!e)return;let t={},r=s[0];for(let e of h){let s=r?.options?.find(t=>t.name===e.name)?.value??e.values[0];s&&(t[e.name]=s)}u(t),m(1)},[e,h,s]),!e)return null;let g=b?.stockQty??0;return r.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/45 px-4",onClick:n,children:(0,r.jsxs)("div",{className:"w-full max-w-lg rounded-2xl border border-[#dce3ff] bg-white p-5 shadow-[0_24px_60px_rgba(0,0,0,0.25)]",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-[#1b2452]",children:"Choose Variant"}),r.jsx("p",{className:"mt-1 text-sm text-[#5d6486] line-clamp-1",children:t})]}),r.jsx("button",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-[#d4dcff] text-[#4e5b8c]",onClick:n,type:"button",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[h.map(e=>(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-[#2d396d]",children:e.name}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:e.values.map(t=>r.jsx("button",{className:`rounded-full border px-3 py-1.5 text-xs font-semibold ${c[e.name]===t?"border-[#3958c7] bg-[#3958c7] text-white":"border-[#d4ddff] bg-white text-[#2e3a6c]"}`,onClick:()=>u(s=>({...s,[e.name]:t})),type:"button",children:t},`${e.name}-${t}`))})]},e.name)),(0,r.jsxs)("div",{className:"grid gap-3 sm:grid-cols-[1fr_auto]",children:[(0,r.jsxs)("label",{className:"text-sm font-semibold text-[#2d396d]",children:["Quantity",r.jsx("input",{className:"mt-2 w-full rounded-xl border border-[#cad3ff] px-3 py-2 text-sm",min:1,max:g>0?g:void 0,onChange:e=>m(Number(e.target.value)),type:"number",value:x})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-[#d7e0ff] bg-[#f8faff] px-4 py-3",children:[r.jsx("p",{className:"text-xs text-[#60709e]",children:"Price"}),r.jsx("p",{className:"text-base font-semibold text-[#18214f]",children:b?(o=b.price,d=b.currency,new Intl.NumberFormat("my"===i?"my-MM":"en-US",{style:"currency",currency:"MMK"===d?"MMK":"USD",maximumFractionDigits:"MMK"===d?0:2}).format(o/("USD"===d?100:1))):"-"}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-[#60709e]",children:["Stock ",b?.stockQty??0]})]})]})]}),(0,r.jsxs)("div",{className:"mt-5 flex justify-end gap-2",children:[r.jsx("button",{className:"rounded-lg border border-[#cad6ff] px-4 py-2 text-sm font-semibold text-[#3349ad]",onClick:n,type:"button",children:"Cancel"}),r.jsx("button",{className:"rounded-lg bg-[#3654c5] px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",disabled:!b||g<=0||x<1||x>g||p,onClick:async()=>{if(b&&!(x<1)){f(!0);try{await l({variantId:b.id,qty:x})}finally{f(!1)}}},type:"button",children:p?"Adding...":"Add to bag"})]})]})})}},3701:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(3596).createProxy)(String.raw`C:\Users\Admin\OneDrive\Desktop\Project\eco\frontend\src\app\[locale]\products\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[563,851,482,382],()=>s(2464));module.exports=r})();